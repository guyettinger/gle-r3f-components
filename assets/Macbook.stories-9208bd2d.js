import{d as Le,u as Wt,V as Ee,k as wn,O as pt,l as Et,m as Gr,n as Rn,o as nr,R as rr,p as On,I as yr,g as Dn,q as Hr,r as Sr,t as Lr,Q as on,S as Kn,a as Pe,v as Ht,w as St,L as sr,x as gt,F as an,b as ct,y as wr,z as Or,A as Ur,B as kt,G as lt,M as cn,H as _r,J as or,T as Pr,K as xr,N as jt,W as Jr,X as Ut,Y as ir,Z as Tn,P as Nr,_ as fn,$ as Kr,a0 as ar,a1 as kr,a2 as cr,a3 as Qr,a4 as Xr,a5 as jr,a6 as Yr,a7 as Zr,a8 as Cn,f as Qt,a9 as Wr,aa as lr,ab as Vr,ac as zr,ad as qr,ae as $r,af as es,ag as ts,ah as ns,ai as rs,aj as ss,ak as os,al as is,am as bn,an as as,ao as kn,ap as cs,aq as ls,ar as As,as as us,at as Ar,au as et,av as wt,aw as Lt,ax as Bs,ay as hs,h as An,az as ds,aA as fs,aB as Cs,aC as ms,aD as ps,aE as Es,i as gs,aF as Qn,aG as vs,aH as Ms,s as ur,j as Me,aI as Yt,C as Is}from"./react-three-fiber.esm-4fee7c38.js";import{r as x}from"./index-76fb7be0.js";import{_ as un}from"./extends-98964cd2.js";import{c as Fs}from"./client-e770a681.js";import"./_commonjsHelpers-de833af9.js";const Vt=new Ee,Un=new Ee,Rs=new Ee;function Ds(A,t,n){const e=Vt.setFromMatrixPosition(A.matrixWorld);e.project(t);const r=n.width/2,o=n.height/2;return[e.x*r+r,-(e.y*o)+o]}function Ts(A,t){const n=Vt.setFromMatrixPosition(A.matrixWorld),e=Un.setFromMatrixPosition(t.matrixWorld),r=n.sub(e),o=t.getWorldDirection(Rs);return r.angleTo(o)>Math.PI/2}function bs(A,t,n,e){const r=Vt.setFromMatrixPosition(A.matrixWorld),o=r.clone();o.project(t),n.setFromCamera(o,t);const i=n.intersectObjects(e,!0);if(i.length){const l=i[0].distance;return r.distanceTo(n.ray.origin)<l}return!0}function Gs(A,t){if(t instanceof pt)return t.zoom;if(t instanceof Et){const n=Vt.setFromMatrixPosition(A.matrixWorld),e=Un.setFromMatrixPosition(t.matrixWorld),r=t.fov*Math.PI/180,o=n.distanceTo(e);return 1/(2*Math.tan(r/2)*o)}else return 1}function ys(A,t,n){if(t instanceof Et||t instanceof pt){const e=Vt.setFromMatrixPosition(A.matrixWorld),r=Un.setFromMatrixPosition(t.matrixWorld),o=e.distanceTo(r),i=(n[1]-n[0])/(t.far-t.near),l=n[1]-i*t.far;return Math.round(i*o+l)}}const Gn=A=>Math.abs(A)<1e-10?0:A;function Br(A,t,n=""){let e="matrix3d(";for(let r=0;r!==16;r++)e+=Gn(t[r]*A.elements[r])+(r!==15?",":")");return n+e}const Hs=(A=>t=>Br(t,A))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Ss=(A=>(t,n)=>Br(t,A(n),"translate(-50%,-50%)"))(A=>[1/A,1/A,1/A,1,-1/A,-1/A,-1/A,-1,1/A,1/A,1/A,1,1,1,1,1]);function Ls(A){return A&&typeof A=="object"&&"current"in A}const ws=x.forwardRef(({children:A,eps:t=.001,style:n,className:e,prepend:r,center:o,fullscreen:i,portal:l,distanceFactor:a,sprite:u=!1,transform:B=!1,occlude:d,onOcclude:C,castShadow:g,receiveShadow:M,material:y,geometry:I,zIndexRange:T=[16777271,0],calculatePosition:k=Ds,as:v="div",wrapperClass:U,pointerEvents:J="auto",...R},X)=>{const{gl:_,camera:O,scene:N,size:P,raycaster:te,events:ne,viewport:z}=Le(),[Z]=x.useState(()=>document.createElement(v)),he=x.useRef(),ee=x.useRef(null),oe=x.useRef(0),ge=x.useRef([0,0]),ce=x.useRef(null),ve=x.useRef(null),de=(l==null?void 0:l.current)||ne.connected||_.domElement.parentNode,Ie=x.useRef(null),we=x.useRef(!1),Oe=x.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&Ls(d[0]),[d]);x.useLayoutEffect(()=>{const Te=_.domElement;d&&d==="blending"?(Te.style.zIndex=`${Math.floor(T[0]/2)}`,Te.style.position="absolute",Te.style.pointerEvents="none"):(Te.style.zIndex=null,Te.style.position=null,Te.style.pointerEvents=null)},[d]),x.useLayoutEffect(()=>{if(ee.current){const Te=he.current=Fs(Z);if(N.updateMatrixWorld(),B)Z.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ie=k(ee.current,O,P);Z.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ie[0]}px,${ie[1]}px,0);transform-origin:0 0;`}return de&&(r?de.prepend(Z):de.appendChild(Z)),()=>{de&&de.removeChild(Z),Te.unmount()}}},[de,B]),x.useLayoutEffect(()=>{U&&(Z.className=U)},[U]);const se=x.useMemo(()=>B?{position:"absolute",top:0,left:0,width:P.width,height:P.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...i&&{top:-P.height/2,left:-P.width/2,width:P.width,height:P.height},...n},[n,o,i,P,B]),Ue=x.useMemo(()=>({position:"absolute",pointerEvents:J}),[J]);x.useLayoutEffect(()=>{if(we.current=!1,B){var Te;(Te=he.current)==null||Te.render(x.createElement("div",{ref:ce,style:se},x.createElement("div",{ref:ve,style:Ue},x.createElement("div",{ref:X,className:e,style:n,children:A}))))}else{var ie;(ie=he.current)==null||ie.render(x.createElement("div",{ref:X,style:se,className:e,children:A}))}});const Re=x.useRef(!0);Wt(Te=>{if(ee.current){O.updateMatrixWorld(),ee.current.updateWorldMatrix(!0,!1);const ie=B?ge.current:k(ee.current,O,P);if(B||Math.abs(oe.current-O.zoom)>t||Math.abs(ge.current[0]-ie[0])>t||Math.abs(ge.current[1]-ie[1])>t){const xe=Ts(ee.current,O);let ye=!1;Oe&&(Array.isArray(d)?ye=d.map(Je=>Je.current):d!=="blending"&&(ye=[N]));const We=Re.current;if(ye){const Je=bs(ee.current,O,te,ye);Re.current=Je&&!xe}else Re.current=!xe;We!==Re.current&&(C?C(!Re.current):Z.style.display=Re.current?"block":"none");const qe=Math.floor(T[0]/2),Mt=d?Oe?[T[0],qe]:[qe-1,0]:T;if(Z.style.zIndex=`${ys(ee.current,O,Mt)}`,B){const[Je,At]=[P.width/2,P.height/2],ut=O.projectionMatrix.elements[5]*At,{isOrthographicCamera:It,top:Ft,left:Bt,bottom:tt,right:Rt}=O,ht=Hs(O.matrixWorldInverse),_t=It?`scale(${ut})translate(${Gn(-(Rt+Bt)/2)}px,${Gn((Ft+tt)/2)}px)`:`translateZ(${ut}px)`;let Ne=ee.current.matrixWorld;u&&(Ne=O.matrixWorldInverse.clone().transpose().copyPosition(Ne).scale(ee.current.scale),Ne.elements[3]=Ne.elements[7]=Ne.elements[11]=0,Ne.elements[15]=1),Z.style.width=P.width+"px",Z.style.height=P.height+"px",Z.style.perspective=It?"":`${ut}px`,ce.current&&ve.current&&(ce.current.style.transform=`${_t}${ht}translate(${Je}px,${At}px)`,ve.current.style.transform=Ss(Ne,1/((a||10)/400)))}else{const Je=a===void 0?1:Gs(ee.current,O)*a;Z.style.transform=`translate3d(${ie[0]}px,${ie[1]}px,0) scale(${Je})`}ge.current=ie,oe.current=O.zoom}}if(!Oe&&Ie.current&&!we.current)if(B){if(ce.current){const ie=ce.current.children[0];if(ie!=null&&ie.clientWidth&&ie!=null&&ie.clientHeight){const{isOrthographicCamera:xe}=O;if(xe||I)R.scale&&(Array.isArray(R.scale)?R.scale instanceof Ee?Ie.current.scale.copy(R.scale.clone().divideScalar(1)):Ie.current.scale.set(1/R.scale[0],1/R.scale[1],1/R.scale[2]):Ie.current.scale.setScalar(1/R.scale));else{const ye=(a||10)/400,We=ie.clientWidth*ye,qe=ie.clientHeight*ye;Ie.current.scale.set(We,qe,1)}we.current=!0}}}else{const ie=Z.children[0];if(ie!=null&&ie.clientWidth&&ie!=null&&ie.clientHeight){const xe=1/z.factor,ye=ie.clientWidth*xe,We=ie.clientHeight*xe;Ie.current.scale.set(ye,We,1),we.current=!0}Ie.current.lookAt(Te.camera.position)}});const vt=x.useMemo(()=>({vertexShader:B?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[B]);return x.createElement("group",un({},R,{ref:ee}),d&&!Oe&&x.createElement("mesh",{castShadow:g,receiveShadow:M,ref:Ie},I||x.createElement("planeGeometry",null),y||x.createElement("shaderMaterial",{side:wn,vertexShader:vt.vertexShader,fragmentShader:vt.fragmentShader})))});function Xn(A,t){if(t===Gr)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),A;if(t===Rn||t===nr){let n=A.getIndex();if(n===null){const i=[],l=A.getAttribute("position");if(l!==void 0){for(let a=0;a<l.count;a++)i.push(a);A.setIndex(i),n=A.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),A}const e=n.count-2,r=[];if(n)if(t===Rn)for(let i=1;i<=e;i++)r.push(n.getX(0)),r.push(n.getX(i)),r.push(n.getX(i+1));else for(let i=0;i<e;i++)i%2===0?(r.push(n.getX(i)),r.push(n.getX(i+1)),r.push(n.getX(i+2))):(r.push(n.getX(i+2)),r.push(n.getX(i+1)),r.push(n.getX(i)));r.length/3!==e&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=A.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),A}const Os=parseInt(rr.replace(/\D+/g,""));var Xe=Uint8Array,at=Uint16Array,yn=Uint32Array,hr=new Xe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dr=new Xe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Us=new Xe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fr=function(A,t){for(var n=new at(31),e=0;e<31;++e)n[e]=t+=1<<A[e-1];for(var r=new yn(n[30]),e=1;e<30;++e)for(var o=n[e];o<n[e+1];++o)r[o]=o-n[e]<<5|e;return[n,r]},Cr=fr(hr,2),mr=Cr[0],_s=Cr[1];mr[28]=258,_s[258]=28;var Ps=fr(dr,0),xs=Ps[0],Hn=new at(32768);for(var Ce=0;Ce<32768;++Ce){var st=(Ce&43690)>>>1|(Ce&21845)<<1;st=(st&52428)>>>2|(st&13107)<<2,st=(st&61680)>>>4|(st&3855)<<4,Hn[Ce]=((st&65280)>>>8|(st&255)<<8)>>>1}var Zt=function(A,t,n){for(var e=A.length,r=0,o=new at(t);r<e;++r)++o[A[r]-1];var i=new at(t);for(r=0;r<t;++r)i[r]=i[r-1]+o[r-1]<<1;var l;if(n){l=new at(1<<t);var a=15-t;for(r=0;r<e;++r)if(A[r])for(var u=r<<4|A[r],B=t-A[r],d=i[A[r]-1]++<<B,C=d|(1<<B)-1;d<=C;++d)l[Hn[d]>>>a]=u}else for(l=new at(e),r=0;r<e;++r)A[r]&&(l[r]=Hn[i[A[r]-1]++]>>>15-A[r]);return l},zt=new Xe(288);for(var Ce=0;Ce<144;++Ce)zt[Ce]=8;for(var Ce=144;Ce<256;++Ce)zt[Ce]=9;for(var Ce=256;Ce<280;++Ce)zt[Ce]=7;for(var Ce=280;Ce<288;++Ce)zt[Ce]=8;var pr=new Xe(32);for(var Ce=0;Ce<32;++Ce)pr[Ce]=5;var Js=Zt(zt,9,1),Ns=Zt(pr,5,1),mn=function(A){for(var t=A[0],n=1;n<A.length;++n)A[n]>t&&(t=A[n]);return t},Ze=function(A,t,n){var e=t/8|0;return(A[e]|A[e+1]<<8)>>(t&7)&n},pn=function(A,t){var n=t/8|0;return(A[n]|A[n+1]<<8|A[n+2]<<16)>>(t&7)},Ks=function(A){return(A/8|0)+(A&7&&1)},ks=function(A,t,n){(t==null||t<0)&&(t=0),(n==null||n>A.length)&&(n=A.length);var e=new(A instanceof at?at:A instanceof yn?yn:Xe)(n-t);return e.set(A.subarray(t,n)),e},Qs=function(A,t,n){var e=A.length;if(!e||n&&!n.l&&e<5)return t||new Xe(0);var r=!t||n,o=!n||n.i;n||(n={}),t||(t=new Xe(e*3));var i=function(se){var Ue=t.length;if(se>Ue){var Re=new Xe(Math.max(Ue*2,se));Re.set(t),t=Re}},l=n.f||0,a=n.p||0,u=n.b||0,B=n.l,d=n.d,C=n.m,g=n.n,M=e*8;do{if(!B){n.f=l=Ze(A,a,1);var y=Ze(A,a+1,3);if(a+=3,y)if(y==1)B=Js,d=Ns,C=9,g=5;else if(y==2){var v=Ze(A,a,31)+257,U=Ze(A,a+10,15)+4,J=v+Ze(A,a+5,31)+1;a+=14;for(var R=new Xe(J),X=new Xe(19),_=0;_<U;++_)X[Us[_]]=Ze(A,a+_*3,7);a+=U*3;for(var O=mn(X),N=(1<<O)-1,P=Zt(X,O,1),_=0;_<J;){var te=P[Ze(A,a,N)];a+=te&15;var I=te>>>4;if(I<16)R[_++]=I;else{var ne=0,z=0;for(I==16?(z=3+Ze(A,a,3),a+=2,ne=R[_-1]):I==17?(z=3+Ze(A,a,7),a+=3):I==18&&(z=11+Ze(A,a,127),a+=7);z--;)R[_++]=ne}}var Z=R.subarray(0,v),he=R.subarray(v);C=mn(Z),g=mn(he),B=Zt(Z,C,1),d=Zt(he,g,1)}else throw"invalid block type";else{var I=Ks(a)+4,T=A[I-4]|A[I-3]<<8,k=I+T;if(k>e){if(o)throw"unexpected EOF";break}r&&i(u+T),t.set(A.subarray(I,k),u),n.b=u+=T,n.p=a=k*8;continue}if(a>M){if(o)throw"unexpected EOF";break}}r&&i(u+131072);for(var ee=(1<<C)-1,oe=(1<<g)-1,ge=a;;ge=a){var ne=B[pn(A,a)&ee],ce=ne>>>4;if(a+=ne&15,a>M){if(o)throw"unexpected EOF";break}if(!ne)throw"invalid length/literal";if(ce<256)t[u++]=ce;else if(ce==256){ge=a,B=null;break}else{var ve=ce-254;if(ce>264){var _=ce-257,de=hr[_];ve=Ze(A,a,(1<<de)-1)+mr[_],a+=de}var Ie=d[pn(A,a)&oe],we=Ie>>>4;if(!Ie)throw"invalid distance";a+=Ie&15;var he=xs[we];if(we>3){var de=dr[we];he+=pn(A,a)&(1<<de)-1,a+=de}if(a>M){if(o)throw"unexpected EOF";break}r&&i(u+131072);for(var Oe=u+ve;u<Oe;u+=4)t[u]=t[u-he],t[u+1]=t[u+1-he],t[u+2]=t[u+2-he],t[u+3]=t[u+3-he];u=Oe}}n.l=B,n.p=ge,n.b=u,B&&(l=1,n.m=C,n.d=d,n.n=g)}while(!l);return u==t.length?t:ks(t,0,u)},Xs=new Xe(0),js=function(A){if((A[0]&15)!=8||A[0]>>>4>7||(A[0]<<8|A[1])%31)throw"invalid zlib data";if(A[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function tn(A,t){return Qs((js(A),A.subarray(2,-4)),t)}var Ys=typeof TextDecoder<"u"&&new TextDecoder,Zs=0;try{Ys.decode(Xs,{stream:!0}),Zs=1}catch{}const Ws=A=>A&&A.isCubeTexture;class Vs extends On{constructor(t,n){var e,r;const o=Ws(t),l=((r=o?(e=t.image[0])==null?void 0:e.width:t.image.width)!=null?r:1024)/4,a=Math.floor(Math.log2(l)),u=Math.pow(2,a),B=3*Math.max(u,16*7),d=4*u,C=[o?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/B}`,`#define CUBEUV_TEXEL_HEIGHT ${1/d}`,`#define CUBEUV_MAX_MIP ${a}.0`],g=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,M=C.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${parseInt(rr.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,y={map:{value:t},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},I=new yr(1,16),T=new Dn({uniforms:y,fragmentShader:M,vertexShader:g,side:wn});super(I,T)}set radius(t){this.material.uniforms.radius.value=t}get radius(){return this.material.uniforms.radius.value}set height(t){this.material.uniforms.height.value=t}get height(){return this.material.uniforms.height.value}}var zs=Object.defineProperty,qs=(A,t,n)=>t in A?zs(A,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):A[t]=n,Y=(A,t,n)=>(qs(A,typeof t!="symbol"?t+"":t,n),n);const nn=new Hr,jn=new Sr,$s=Math.cos(70*(Math.PI/180)),Yn=(A,t)=>(A%t+t)%t;let eo=class extends Lr{constructor(t,n){super(),Y(this,"object"),Y(this,"domElement"),Y(this,"enabled",!0),Y(this,"target",new Ee),Y(this,"minDistance",0),Y(this,"maxDistance",1/0),Y(this,"minZoom",0),Y(this,"maxZoom",1/0),Y(this,"minPolarAngle",0),Y(this,"maxPolarAngle",Math.PI),Y(this,"minAzimuthAngle",-1/0),Y(this,"maxAzimuthAngle",1/0),Y(this,"enableDamping",!1),Y(this,"dampingFactor",.05),Y(this,"enableZoom",!0),Y(this,"zoomSpeed",1),Y(this,"enableRotate",!0),Y(this,"rotateSpeed",1),Y(this,"enablePan",!0),Y(this,"panSpeed",1),Y(this,"screenSpacePanning",!0),Y(this,"keyPanSpeed",7),Y(this,"zoomToCursor",!1),Y(this,"autoRotate",!1),Y(this,"autoRotateSpeed",2),Y(this,"reverseOrbit",!1),Y(this,"reverseHorizontalOrbit",!1),Y(this,"reverseVerticalOrbit",!1),Y(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Y(this,"mouseButtons",{LEFT:Ht.ROTATE,MIDDLE:Ht.DOLLY,RIGHT:Ht.PAN}),Y(this,"touches",{ONE:St.ROTATE,TWO:St.DOLLY_PAN}),Y(this,"target0"),Y(this,"position0"),Y(this,"zoom0"),Y(this,"_domElementKeyEvents",null),Y(this,"getPolarAngle"),Y(this,"getAzimuthalAngle"),Y(this,"setPolarAngle"),Y(this,"setAzimuthalAngle"),Y(this,"getDistance"),Y(this,"listenToKeyEvents"),Y(this,"stopListenToKeyEvents"),Y(this,"saveState"),Y(this,"reset"),Y(this,"update"),Y(this,"connect"),Y(this,"dispose"),this.object=t,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>B.phi,this.getAzimuthalAngle=()=>B.theta,this.setPolarAngle=f=>{let D=Yn(f,2*Math.PI),K=B.phi;K<0&&(K+=2*Math.PI),D<0&&(D+=2*Math.PI);let re=Math.abs(D-K);2*Math.PI-re<re&&(D<K?D+=2*Math.PI:K+=2*Math.PI),d.phi=D-K,e.update()},this.setAzimuthalAngle=f=>{let D=Yn(f,2*Math.PI),K=B.theta;K<0&&(K+=2*Math.PI),D<0&&(D+=2*Math.PI);let re=Math.abs(D-K);2*Math.PI-re<re&&(D<K?D+=2*Math.PI:K+=2*Math.PI),d.theta=D-K,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=f=>{f.addEventListener("keydown",Dt),this._domElementKeyEvents=f},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Dt),this._domElementKeyEvents=null},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(r),e.update(),a=l.NONE},this.update=(()=>{const f=new Ee,D=new Ee(0,1,0),K=new on().setFromUnitVectors(t.up,D),re=K.clone().invert(),G=new Ee,He=new on,Ve=2*Math.PI;return function(){const $t=e.object.position;K.setFromUnitVectors(t.up,D),re.copy(K).invert(),f.copy($t).sub(e.target),f.applyQuaternion(K),B.setFromVector3(f),e.autoRotate&&a===l.NONE&&z(te()),e.enableDamping?(B.theta+=d.theta*e.dampingFactor,B.phi+=d.phi*e.dampingFactor):(B.theta+=d.theta,B.phi+=d.phi);let je=e.minAzimuthAngle,Ye=e.maxAzimuthAngle;isFinite(je)&&isFinite(Ye)&&(je<-Math.PI?je+=Ve:je>Math.PI&&(je-=Ve),Ye<-Math.PI?Ye+=Ve:Ye>Math.PI&&(Ye-=Ve),je<=Ye?B.theta=Math.max(je,Math.min(Ye,B.theta)):B.theta=B.theta>(je+Ye)/2?Math.max(je,B.theta):Math.min(Ye,B.theta)),B.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,B.phi)),B.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(g,e.dampingFactor):e.target.add(g),e.zoomToCursor&&O||e.object.isOrthographicCamera?B.radius=de(B.radius):B.radius=de(B.radius*C),f.setFromSpherical(B),f.applyQuaternion(re),$t.copy(e.target).add(f),e.object.lookAt(e.target),e.enableDamping===!0?(d.theta*=1-e.dampingFactor,d.phi*=1-e.dampingFactor,g.multiplyScalar(1-e.dampingFactor)):(d.set(0,0,0),g.set(0,0,0));let Gt=!1;if(e.zoomToCursor&&O){let dt=null;if(e.object instanceof Et&&e.object.isPerspectiveCamera){const ft=f.length();dt=de(ft*C);const yt=ft-dt;e.object.position.addScaledVector(X,yt),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const ft=new Ee(_.x,_.y,0);ft.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/C)),e.object.updateProjectionMatrix(),Gt=!0;const yt=new Ee(_.x,_.y,0);yt.unproject(e.object),e.object.position.sub(yt).add(ft),e.object.updateMatrixWorld(),dt=f.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;dt!==null&&(e.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(dt).add(e.object.position):(nn.origin.copy(e.object.position),nn.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(nn.direction))<$s?t.lookAt(e.target):(jn.setFromNormalAndCoplanarPoint(e.object.up,e.target),nn.intersectPlane(jn,e.target))))}else e.object instanceof pt&&e.object.isOrthographicCamera&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/C)),e.object.updateProjectionMatrix(),Gt=!0);return C=1,O=!1,Gt||G.distanceToSquared(e.object.position)>u||8*(1-He.dot(e.object.quaternion))>u?(e.dispatchEvent(r),G.copy(e.object.position),He.copy(e.object.quaternion),Gt=!1,!0):!1}})(),this.connect=f=>{f===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),e.domElement=f,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",qt),e.domElement.addEventListener("pointerdown",Ft),e.domElement.addEventListener("pointercancel",Rt),e.domElement.addEventListener("wheel",Ne)},this.dispose=()=>{var f,D,K,re,G,He;(f=e.domElement)==null||f.removeEventListener("contextmenu",qt),(D=e.domElement)==null||D.removeEventListener("pointerdown",Ft),(K=e.domElement)==null||K.removeEventListener("pointercancel",Rt),(re=e.domElement)==null||re.removeEventListener("wheel",Ne),(G=e.domElement)==null||G.ownerDocument.removeEventListener("pointermove",Bt),(He=e.domElement)==null||He.ownerDocument.removeEventListener("pointerup",tt),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",Dt)};const e=this,r={type:"change"},o={type:"start"},i={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=l.NONE;const u=1e-6,B=new Kn,d=new Kn;let C=1;const g=new Ee,M=new Pe,y=new Pe,I=new Pe,T=new Pe,k=new Pe,v=new Pe,U=new Pe,J=new Pe,R=new Pe,X=new Ee,_=new Pe;let O=!1;const N=[],P={};function te(){return 2*Math.PI/60/60*e.autoRotateSpeed}function ne(){return Math.pow(.95,e.zoomSpeed)}function z(f){e.reverseOrbit||e.reverseHorizontalOrbit?d.theta+=f:d.theta-=f}function Z(f){e.reverseOrbit||e.reverseVerticalOrbit?d.phi+=f:d.phi-=f}const he=(()=>{const f=new Ee;return function(K,re){f.setFromMatrixColumn(re,0),f.multiplyScalar(-K),g.add(f)}})(),ee=(()=>{const f=new Ee;return function(K,re){e.screenSpacePanning===!0?f.setFromMatrixColumn(re,1):(f.setFromMatrixColumn(re,0),f.crossVectors(e.object.up,f)),f.multiplyScalar(K),g.add(f)}})(),oe=(()=>{const f=new Ee;return function(K,re){const G=e.domElement;if(G&&e.object instanceof Et&&e.object.isPerspectiveCamera){const He=e.object.position;f.copy(He).sub(e.target);let Ve=f.length();Ve*=Math.tan(e.object.fov/2*Math.PI/180),he(2*K*Ve/G.clientHeight,e.object.matrix),ee(2*re*Ve/G.clientHeight,e.object.matrix)}else G&&e.object instanceof pt&&e.object.isOrthographicCamera?(he(K*(e.object.right-e.object.left)/e.object.zoom/G.clientWidth,e.object.matrix),ee(re*(e.object.top-e.object.bottom)/e.object.zoom/G.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function ge(f){e.object instanceof Et&&e.object.isPerspectiveCamera||e.object instanceof pt&&e.object.isOrthographicCamera?C/=f:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ce(f){e.object instanceof Et&&e.object.isPerspectiveCamera||e.object instanceof pt&&e.object.isOrthographicCamera?C*=f:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function ve(f){if(!e.zoomToCursor||!e.domElement)return;O=!0;const D=e.domElement.getBoundingClientRect(),K=f.clientX-D.left,re=f.clientY-D.top,G=D.width,He=D.height;_.x=K/G*2-1,_.y=-(re/He)*2+1,X.set(_.x,_.y,1).unproject(e.object).sub(e.object.position).normalize()}function de(f){return Math.max(e.minDistance,Math.min(e.maxDistance,f))}function Ie(f){M.set(f.clientX,f.clientY)}function we(f){ve(f),U.set(f.clientX,f.clientY)}function Oe(f){T.set(f.clientX,f.clientY)}function se(f){y.set(f.clientX,f.clientY),I.subVectors(y,M).multiplyScalar(e.rotateSpeed);const D=e.domElement;D&&(z(2*Math.PI*I.x/D.clientHeight),Z(2*Math.PI*I.y/D.clientHeight)),M.copy(y),e.update()}function Ue(f){J.set(f.clientX,f.clientY),R.subVectors(J,U),R.y>0?ge(ne()):R.y<0&&ce(ne()),U.copy(J),e.update()}function Re(f){k.set(f.clientX,f.clientY),v.subVectors(k,T).multiplyScalar(e.panSpeed),oe(v.x,v.y),T.copy(k),e.update()}function vt(f){ve(f),f.deltaY<0?ce(ne()):f.deltaY>0&&ge(ne()),e.update()}function Te(f){let D=!1;switch(f.code){case e.keys.UP:oe(0,e.keyPanSpeed),D=!0;break;case e.keys.BOTTOM:oe(0,-e.keyPanSpeed),D=!0;break;case e.keys.LEFT:oe(e.keyPanSpeed,0),D=!0;break;case e.keys.RIGHT:oe(-e.keyPanSpeed,0),D=!0;break}D&&(f.preventDefault(),e.update())}function ie(){if(N.length==1)M.set(N[0].pageX,N[0].pageY);else{const f=.5*(N[0].pageX+N[1].pageX),D=.5*(N[0].pageY+N[1].pageY);M.set(f,D)}}function xe(){if(N.length==1)T.set(N[0].pageX,N[0].pageY);else{const f=.5*(N[0].pageX+N[1].pageX),D=.5*(N[0].pageY+N[1].pageY);T.set(f,D)}}function ye(){const f=N[0].pageX-N[1].pageX,D=N[0].pageY-N[1].pageY,K=Math.sqrt(f*f+D*D);U.set(0,K)}function We(){e.enableZoom&&ye(),e.enablePan&&xe()}function qe(){e.enableZoom&&ye(),e.enableRotate&&ie()}function Mt(f){if(N.length==1)y.set(f.pageX,f.pageY);else{const K=bt(f),re=.5*(f.pageX+K.x),G=.5*(f.pageY+K.y);y.set(re,G)}I.subVectors(y,M).multiplyScalar(e.rotateSpeed);const D=e.domElement;D&&(z(2*Math.PI*I.x/D.clientHeight),Z(2*Math.PI*I.y/D.clientHeight)),M.copy(y)}function Je(f){if(N.length==1)k.set(f.pageX,f.pageY);else{const D=bt(f),K=.5*(f.pageX+D.x),re=.5*(f.pageY+D.y);k.set(K,re)}v.subVectors(k,T).multiplyScalar(e.panSpeed),oe(v.x,v.y),T.copy(k)}function At(f){const D=bt(f),K=f.pageX-D.x,re=f.pageY-D.y,G=Math.sqrt(K*K+re*re);J.set(0,G),R.set(0,Math.pow(J.y/U.y,e.zoomSpeed)),ge(R.y),U.copy(J)}function ut(f){e.enableZoom&&At(f),e.enablePan&&Je(f)}function It(f){e.enableZoom&&At(f),e.enableRotate&&Mt(f)}function Ft(f){var D,K;e.enabled!==!1&&(N.length===0&&((D=e.domElement)==null||D.ownerDocument.addEventListener("pointermove",Bt),(K=e.domElement)==null||K.ownerDocument.addEventListener("pointerup",tt)),dn(f),f.pointerType==="touch"?Tt(f):ht(f))}function Bt(f){e.enabled!==!1&&(f.pointerType==="touch"?hn(f):_t(f))}function tt(f){var D,K,re;nt(f),N.length===0&&((D=e.domElement)==null||D.releasePointerCapture(f.pointerId),(K=e.domElement)==null||K.ownerDocument.removeEventListener("pointermove",Bt),(re=e.domElement)==null||re.ownerDocument.removeEventListener("pointerup",tt)),e.dispatchEvent(i),a=l.NONE}function Rt(f){nt(f)}function ht(f){let D;switch(f.button){case 0:D=e.mouseButtons.LEFT;break;case 1:D=e.mouseButtons.MIDDLE;break;case 2:D=e.mouseButtons.RIGHT;break;default:D=-1}switch(D){case Ht.DOLLY:if(e.enableZoom===!1)return;we(f),a=l.DOLLY;break;case Ht.ROTATE:if(f.ctrlKey||f.metaKey||f.shiftKey){if(e.enablePan===!1)return;Oe(f),a=l.PAN}else{if(e.enableRotate===!1)return;Ie(f),a=l.ROTATE}break;case Ht.PAN:if(f.ctrlKey||f.metaKey||f.shiftKey){if(e.enableRotate===!1)return;Ie(f),a=l.ROTATE}else{if(e.enablePan===!1)return;Oe(f),a=l.PAN}break;default:a=l.NONE}a!==l.NONE&&e.dispatchEvent(o)}function _t(f){if(e.enabled!==!1)switch(a){case l.ROTATE:if(e.enableRotate===!1)return;se(f);break;case l.DOLLY:if(e.enableZoom===!1)return;Ue(f);break;case l.PAN:if(e.enablePan===!1)return;Re(f);break}}function Ne(f){e.enabled===!1||e.enableZoom===!1||a!==l.NONE&&a!==l.ROTATE||(f.preventDefault(),e.dispatchEvent(o),vt(f),e.dispatchEvent(i))}function Dt(f){e.enabled===!1||e.enablePan===!1||Te(f)}function Tt(f){switch(be(f),N.length){case 1:switch(e.touches.ONE){case St.ROTATE:if(e.enableRotate===!1)return;ie(),a=l.TOUCH_ROTATE;break;case St.PAN:if(e.enablePan===!1)return;xe(),a=l.TOUCH_PAN;break;default:a=l.NONE}break;case 2:switch(e.touches.TWO){case St.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;We(),a=l.TOUCH_DOLLY_PAN;break;case St.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;qe(),a=l.TOUCH_DOLLY_ROTATE;break;default:a=l.NONE}break;default:a=l.NONE}a!==l.NONE&&e.dispatchEvent(o)}function hn(f){switch(be(f),a){case l.TOUCH_ROTATE:if(e.enableRotate===!1)return;Mt(f),e.update();break;case l.TOUCH_PAN:if(e.enablePan===!1)return;Je(f),e.update();break;case l.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;ut(f),e.update();break;case l.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;It(f),e.update();break;default:a=l.NONE}}function qt(f){e.enabled!==!1&&f.preventDefault()}function dn(f){N.push(f)}function nt(f){delete P[f.pointerId];for(let D=0;D<N.length;D++)if(N[D].pointerId==f.pointerId){N.splice(D,1);return}}function be(f){let D=P[f.pointerId];D===void 0&&(D=new Pe,P[f.pointerId]=D),D.set(f.pageX,f.pageY)}function bt(f){const D=f.pointerId===N[0].pointerId?N[1]:N[0];return P[D.pointerId]}n!==void 0&&this.connect(n),this.update()}};class _n extends sr{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new oo(n)}),this.register(function(n){return new ho(n)}),this.register(function(n){return new fo(n)}),this.register(function(n){return new Co(n)}),this.register(function(n){return new ao(n)}),this.register(function(n){return new co(n)}),this.register(function(n){return new lo(n)}),this.register(function(n){return new Ao(n)}),this.register(function(n){return new so(n)}),this.register(function(n){return new uo(n)}),this.register(function(n){return new io(n)}),this.register(function(n){return new Bo(n)}),this.register(function(n){return new no(n)}),this.register(function(n){return new mo(n)}),this.register(function(n){return new po(n)})}load(t,n,e,r){const o=this;let i;this.resourcePath!==""?i=this.resourcePath:this.path!==""?i=this.path:i=gt.extractUrlBase(t),this.manager.itemStart(t);const l=function(u){r?r(u):console.error(u),o.manager.itemError(t),o.manager.itemEnd(t)},a=new an(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(u){try{o.parse(u,i,function(B){n(B),o.manager.itemEnd(t)},l)}catch(B){l(B)}},e,l)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,n,e,r){let o;const i={},l={};if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(gt.decodeText(new Uint8Array(t.slice(0,4)))===Er){try{i[$.KHR_BINARY_GLTF]=new Eo(t)}catch(B){r&&r(B);return}o=JSON.parse(i[$.KHR_BINARY_GLTF].content)}else o=JSON.parse(gt.decodeText(new Uint8Array(t)));else o=t;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const a=new So(o,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});a.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const B=this.pluginCallbacks[u](a);l[B.name]=B,i[B.name]=!0}if(o.extensionsUsed)for(let u=0;u<o.extensionsUsed.length;++u){const B=o.extensionsUsed[u],d=o.extensionsRequired||[];switch(B){case $.KHR_MATERIALS_UNLIT:i[B]=new ro;break;case $.KHR_DRACO_MESH_COMPRESSION:i[B]=new go(o,this.dracoLoader);break;case $.KHR_TEXTURE_TRANSFORM:i[B]=new vo;break;case $.KHR_MESH_QUANTIZATION:i[B]=new Mo;break;default:d.indexOf(B)>=0&&l[B]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+B+'".')}}a.setExtensions(i),a.setPlugins(l),a.parse(e,r)}parseAsync(t,n){const e=this;return new Promise(function(r,o){e.parse(t,n,r,o)})}}function to(){let A={};return{get:function(t){return A[t]},add:function(t,n){A[t]=n},remove:function(t){delete A[t]},removeAll:function(){A={}}}}const $={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class no{constructor(t){this.parser=t,this.name=$.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,n=this.parser.json.nodes||[];for(let e=0,r=n.length;e<r;e++){const o=n[e];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){const n=this.parser,e="light:"+t;let r=n.cache.get(e);if(r)return r;const o=n.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let u;const B=new ct(16777215);a.color!==void 0&&B.fromArray(a.color);const d=a.range!==void 0?a.range:0;switch(a.type){case"directional":u=new Ur(B),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Or(B),u.distance=d;break;case"spot":u=new wr(B),u.distance=d,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,u.angle=a.spot.outerConeAngle,u.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return u.position.set(0,0,0),u.decay=2,it(u,a),a.intensity!==void 0&&(u.intensity=a.intensity),u.name=n.createUniqueName(a.name||"light_"+t),r=Promise.resolve(u),n.cache.add(e,r),r}getDependency(t,n){if(t==="light")return this._loadLight(n)}createNodeAttachment(t){const n=this,e=this.parser,o=e.json.nodes[t],l=(o.extensions&&o.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(a){return e._getNodeRef(n.cache,l,a)})}}class ro{constructor(){this.name=$.KHR_MATERIALS_UNLIT}getMaterialType(){return kt}extendParams(t,n,e){const r=[];t.color=new ct(1,1,1),t.opacity=1;const o=n.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const i=o.baseColorFactor;t.color.fromArray(i),t.opacity=i[3]}o.baseColorTexture!==void 0&&r.push(e.assignTexture(t,"map",o.baseColorTexture,3001))}return Promise.all(r)}}class so{constructor(t){this.parser=t,this.name=$.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,n){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(n.emissiveIntensity=o),Promise.resolve()}}class oo{constructor(t){this.parser=t,this.name=$.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:lt}extendMaterialParams(t,n){const e=this.parser,r=e.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];if(i.clearcoatFactor!==void 0&&(n.clearcoat=i.clearcoatFactor),i.clearcoatTexture!==void 0&&o.push(e.assignTexture(n,"clearcoatMap",i.clearcoatTexture)),i.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=i.clearcoatRoughnessFactor),i.clearcoatRoughnessTexture!==void 0&&o.push(e.assignTexture(n,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),i.clearcoatNormalTexture!==void 0&&(o.push(e.assignTexture(n,"clearcoatNormalMap",i.clearcoatNormalTexture)),i.clearcoatNormalTexture.scale!==void 0)){const l=i.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Pe(l,l)}return Promise.all(o)}}class io{constructor(t){this.parser=t,this.name=$.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:lt}extendMaterialParams(t,n){const e=this.parser,r=e.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];return i.iridescenceFactor!==void 0&&(n.iridescence=i.iridescenceFactor),i.iridescenceTexture!==void 0&&o.push(e.assignTexture(n,"iridescenceMap",i.iridescenceTexture)),i.iridescenceIor!==void 0&&(n.iridescenceIOR=i.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),i.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),i.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),i.iridescenceThicknessTexture!==void 0&&o.push(e.assignTexture(n,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(o)}}class ao{constructor(t){this.parser=t,this.name=$.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:lt}extendMaterialParams(t,n){const e=this.parser,r=e.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[];n.sheenColor=new ct(0,0,0),n.sheenRoughness=0,n.sheen=1;const i=r.extensions[this.name];return i.sheenColorFactor!==void 0&&n.sheenColor.fromArray(i.sheenColorFactor),i.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=i.sheenRoughnessFactor),i.sheenColorTexture!==void 0&&o.push(e.assignTexture(n,"sheenColorMap",i.sheenColorTexture,3001)),i.sheenRoughnessTexture!==void 0&&o.push(e.assignTexture(n,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(o)}}class co{constructor(t){this.parser=t,this.name=$.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:lt}extendMaterialParams(t,n){const e=this.parser,r=e.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];return i.transmissionFactor!==void 0&&(n.transmission=i.transmissionFactor),i.transmissionTexture!==void 0&&o.push(e.assignTexture(n,"transmissionMap",i.transmissionTexture)),Promise.all(o)}}class lo{constructor(t){this.parser=t,this.name=$.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:lt}extendMaterialParams(t,n){const e=this.parser,r=e.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];n.thickness=i.thicknessFactor!==void 0?i.thicknessFactor:0,i.thicknessTexture!==void 0&&o.push(e.assignTexture(n,"thicknessMap",i.thicknessTexture)),n.attenuationDistance=i.attenuationDistance||1/0;const l=i.attenuationColor||[1,1,1];return n.attenuationColor=new ct(l[0],l[1],l[2]),Promise.all(o)}}class Ao{constructor(t){this.parser=t,this.name=$.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:lt}extendMaterialParams(t,n){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name];return n.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class uo{constructor(t){this.parser=t,this.name=$.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:lt}extendMaterialParams(t,n){const e=this.parser,r=e.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];n.specularIntensity=i.specularFactor!==void 0?i.specularFactor:1,i.specularTexture!==void 0&&o.push(e.assignTexture(n,"specularIntensityMap",i.specularTexture));const l=i.specularColorFactor||[1,1,1];return n.specularColor=new ct(l[0],l[1],l[2]),i.specularColorTexture!==void 0&&o.push(e.assignTexture(n,"specularColorMap",i.specularColorTexture,3001)),Promise.all(o)}}class Bo{constructor(t){this.parser=t,this.name=$.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:lt}extendMaterialParams(t,n){const e=this.parser,r=e.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];return i.anisotropyStrength!==void 0&&(n.anisotropy=i.anisotropyStrength),i.anisotropyRotation!==void 0&&(n.anisotropyRotation=i.anisotropyRotation),i.anisotropyTexture!==void 0&&o.push(e.assignTexture(n,"anisotropyMap",i.anisotropyTexture)),Promise.all(o)}}class ho{constructor(t){this.parser=t,this.name=$.KHR_TEXTURE_BASISU}loadTexture(t){const n=this.parser,e=n.json,r=e.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],i=n.options.ktx2Loader;if(!i){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(t,o.source,i)}}class fo{constructor(t){this.parser=t,this.name=$.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const n=this.name,e=this.parser,r=e.json,o=r.textures[t];if(!o.extensions||!o.extensions[n])return null;const i=o.extensions[n],l=r.images[i.source];let a=e.textureLoader;if(l.uri){const u=e.options.manager.getHandler(l.uri);u!==null&&(a=u)}return this.detectSupport().then(function(u){if(u)return e.loadTextureImage(t,i.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return e.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class Co{constructor(t){this.parser=t,this.name=$.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const n=this.name,e=this.parser,r=e.json,o=r.textures[t];if(!o.extensions||!o.extensions[n])return null;const i=o.extensions[n],l=r.images[i.source];let a=e.textureLoader;if(l.uri){const u=e.options.manager.getHandler(l.uri);u!==null&&(a=u)}return this.detectSupport().then(function(u){if(u)return e.loadTextureImage(t,i.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return e.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){t(n.height===1)}})),this.isSupported}}class mo{constructor(t){this.name=$.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const n=this.parser.json,e=n.bufferViews[t];if(e.extensions&&e.extensions[this.name]){const r=e.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(l){const a=r.byteOffset||0,u=r.byteLength||0,B=r.count,d=r.byteStride,C=new Uint8Array(l,a,u);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(B,d,C,r.mode,r.filter).then(function(g){return g.buffer}):i.ready.then(function(){const g=new ArrayBuffer(B*d);return i.decodeGltfBuffer(new Uint8Array(g),B,d,C,r.mode,r.filter),g})})}else return null}}class po{constructor(t){this.name=$.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const n=this.parser.json,e=n.nodes[t];if(!e.extensions||!e.extensions[this.name]||e.mesh===void 0)return null;const r=n.meshes[e.mesh];for(const u of r.primitives)if(u.mode!==Qe.TRIANGLES&&u.mode!==Qe.TRIANGLE_STRIP&&u.mode!==Qe.TRIANGLE_FAN&&u.mode!==void 0)return null;const i=e.extensions[this.name].attributes,l=[],a={};for(const u in i)l.push(this.parser.getDependency("accessor",i[u]).then(B=>(a[u]=B,a[u])));return l.length<1?null:(l.push(this.parser.createNodeMesh(t)),Promise.all(l).then(u=>{const B=u.pop(),d=B.isGroup?B.children:[B],C=u[0].count,g=[];for(const M of d){const y=new cn,I=new Ee,T=new on,k=new Ee(1,1,1),v=new _r(M.geometry,M.material,C);for(let U=0;U<C;U++)a.TRANSLATION&&I.fromBufferAttribute(a.TRANSLATION,U),a.ROTATION&&T.fromBufferAttribute(a.ROTATION,U),a.SCALE&&k.fromBufferAttribute(a.SCALE,U),v.setMatrixAt(U,y.compose(I,T,k));for(const U in a)U!=="TRANSLATION"&&U!=="ROTATION"&&U!=="SCALE"&&M.geometry.setAttribute(U,a[U]);or.prototype.copy.call(v,M),this.parser.assignFinalMaterial(v),g.push(v)}return B.isGroup?(B.clear(),B.add(...g),B):g[0]}))}}const Er="glTF",Nt=12,Zn={JSON:1313821514,BIN:5130562};class Eo{constructor(t){this.name=$.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(t,0,Nt);if(this.header={magic:gt.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Er)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const e=this.header.length-Nt,r=new DataView(t,Nt);let o=0;for(;o<e;){const i=r.getUint32(o,!0);o+=4;const l=r.getUint32(o,!0);if(o+=4,l===Zn.JSON){const a=new Uint8Array(t,Nt+o,i);this.content=gt.decodeText(a)}else if(l===Zn.BIN){const a=Nt+o;this.body=t.slice(a,a+i)}o+=i}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class go{constructor(t,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=$.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(t,n){const e=this.json,r=this.dracoLoader,o=t.extensions[this.name].bufferView,i=t.extensions[this.name].attributes,l={},a={},u={};for(const B in i){const d=Sn[B]||B.toLowerCase();l[d]=i[B]}for(const B in t.attributes){const d=Sn[B]||B.toLowerCase();if(i[B]!==void 0){const C=e.accessors[t.attributes[B]],g=Ot[C.componentType];u[d]=g.name,a[d]=C.normalized===!0}}return n.getDependency("bufferView",o).then(function(B){return new Promise(function(d){r.decodeDracoFile(B,function(C){for(const g in C.attributes){const M=C.attributes[g],y=a[g];y!==void 0&&(M.normalized=y)}d(C)},l,u)})})}}class vo{constructor(){this.name=$.KHR_TEXTURE_TRANSFORM}extendTexture(t,n){return(n.texCoord===void 0||n.texCoord===t.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(t=t.clone(),n.texCoord!==void 0&&(t.channel=n.texCoord),n.offset!==void 0&&t.offset.fromArray(n.offset),n.rotation!==void 0&&(t.rotation=n.rotation),n.scale!==void 0&&t.repeat.fromArray(n.scale),t.needsUpdate=!0),t}}class Mo{constructor(){this.name=$.KHR_MESH_QUANTIZATION}}class gr extends us{constructor(t,n,e,r){super(t,n,e,r)}copySampleValue_(t){const n=this.resultBuffer,e=this.sampleValues,r=this.valueSize,o=t*r*3+r;for(let i=0;i!==r;i++)n[i]=e[o+i];return n}interpolate_(t,n,e,r){const o=this.resultBuffer,i=this.sampleValues,l=this.valueSize,a=l*2,u=l*3,B=r-n,d=(e-n)/B,C=d*d,g=C*d,M=t*u,y=M-u,I=-2*g+3*C,T=g-C,k=1-I,v=T-C+d;for(let U=0;U!==l;U++){const J=i[y+U+l],R=i[y+U+a]*B,X=i[M+U+l],_=i[M+U]*B;o[U]=k*J+v*R+I*X+T*_}return o}}const Io=new on;class Fo extends gr{interpolate_(t,n,e,r){const o=super.interpolate_(t,n,e,r);return Io.fromArray(o).normalize().toArray(o),o}}const Qe={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ot={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Wn={9728:qr,9729:Ut,9984:$r,9985:es,9986:ts,9987:ir},Vn={33071:ns,33648:rs,10497:Tn},En={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Sn={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Os>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ot={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Ro={CUBICSPLINE:void 0,LINEAR:lr,STEP:ss},gn={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Do(A){return A.DefaultMaterial===void 0&&(A.DefaultMaterial=new ar({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:os})),A.DefaultMaterial}function mt(A,t,n){for(const e in n.extensions)A[e]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[e]=n.extensions[e])}function it(A,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(A.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function To(A,t,n){let e=!1,r=!1,o=!1;for(let u=0,B=t.length;u<B;u++){const d=t[u];if(d.POSITION!==void 0&&(e=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(o=!0),e&&r&&o)break}if(!e&&!r&&!o)return Promise.resolve(A);const i=[],l=[],a=[];for(let u=0,B=t.length;u<B;u++){const d=t[u];if(e){const C=d.POSITION!==void 0?n.getDependency("accessor",d.POSITION):A.attributes.position;i.push(C)}if(r){const C=d.NORMAL!==void 0?n.getDependency("accessor",d.NORMAL):A.attributes.normal;l.push(C)}if(o){const C=d.COLOR_0!==void 0?n.getDependency("accessor",d.COLOR_0):A.attributes.color;a.push(C)}}return Promise.all([Promise.all(i),Promise.all(l),Promise.all(a)]).then(function(u){const B=u[0],d=u[1],C=u[2];return e&&(A.morphAttributes.position=B),r&&(A.morphAttributes.normal=d),o&&(A.morphAttributes.color=C),A.morphTargetsRelative=!0,A})}function bo(A,t){if(A.updateMorphTargets(),t.weights!==void 0)for(let n=0,e=t.weights.length;n<e;n++)A.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(A.morphTargetInfluences.length===n.length){A.morphTargetDictionary={};for(let e=0,r=n.length;e<r;e++)A.morphTargetDictionary[n[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Go(A){let t;const n=A.extensions&&A.extensions[$.KHR_DRACO_MESH_COMPRESSION];if(n?t="draco:"+n.bufferView+":"+n.indices+":"+vn(n.attributes):t=A.indices+":"+vn(A.attributes)+":"+A.mode,A.targets!==void 0)for(let e=0,r=A.targets.length;e<r;e++)t+=":"+vn(A.targets[e]);return t}function vn(A){let t="";const n=Object.keys(A).sort();for(let e=0,r=n.length;e<r;e++)t+=n[e]+":"+A[n[e]]+";";return t}function Ln(A){switch(A){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function yo(A){return A.search(/\.jpe?g($|\?)/i)>0||A.search(/^data\:image\/jpeg/)===0?"image/jpeg":A.search(/\.webp($|\?)/i)>0||A.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Ho=new cn;class So{constructor(t={},n={}){this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new to,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let e=!1,r=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,o=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||e||r&&o<98?this.textureLoader=new Pr(this.options.manager):this.textureLoader=new xr(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new an(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,n){const e=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(i){return i._markDefs&&i._markDefs()}),Promise.all(this._invokeAll(function(i){return i.beforeRoot&&i.beforeRoot()})).then(function(){return Promise.all([e.getDependencies("scene"),e.getDependencies("animation"),e.getDependencies("camera")])}).then(function(i){const l={scene:i[0][r.scene||0],scenes:i[0],animations:i[1],cameras:i[2],asset:r.asset,parser:e,userData:{}};mt(o,l,r),it(l,r),Promise.all(e._invokeAll(function(a){return a.afterRoot&&a.afterRoot(l)})).then(function(){t(l)})}).catch(n)}_markDefs(){const t=this.json.nodes||[],n=this.json.skins||[],e=this.json.meshes||[];for(let r=0,o=n.length;r<o;r++){const i=n[r].joints;for(let l=0,a=i.length;l<a;l++)t[i[l]].isBone=!0}for(let r=0,o=t.length;r<o;r++){const i=t[r];i.mesh!==void 0&&(this._addNodeRef(this.meshCache,i.mesh),i.skin!==void 0&&(e[i.mesh].isSkinnedMesh=!0)),i.camera!==void 0&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(t,n){n!==void 0&&(t.refs[n]===void 0&&(t.refs[n]=t.uses[n]=0),t.refs[n]++)}_getNodeRef(t,n,e){if(t.refs[n]<=1)return e;const r=e.clone(),o=(i,l)=>{const a=this.associations.get(i);a!=null&&this.associations.set(l,a);for(const[u,B]of i.children.entries())o(B,l.children[u])};return o(e,r),r.name+="_instance_"+t.uses[n]++,r}_invokeOne(t){const n=Object.values(this.plugins);n.push(this);for(let e=0;e<n.length;e++){const r=t(n[e]);if(r)return r}return null}_invokeAll(t){const n=Object.values(this.plugins);n.unshift(this);const e=[];for(let r=0;r<n.length;r++){const o=t(n[r]);o&&e.push(o)}return e}getDependency(t,n){const e=t+":"+n;let r=this.cache.get(e);if(!r){switch(t){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(n)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,n)}),!r)throw new Error("Unknown type: "+t);break}this.cache.add(e,r)}return r}getDependencies(t){let n=this.cache.get(t);if(!n){const e=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(o,i){return e.getDependency(t,i)})),this.cache.add(t,n)}return n}loadBuffer(t){const n=this.json.buffers[t],e=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&t===0)return Promise.resolve(this.extensions[$.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(o,i){e.load(gt.resolveURL(n.uri,r.path),o,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(t){const n=this.json.bufferViews[t];return this.getDependency("buffer",n.buffer).then(function(e){const r=n.byteLength||0,o=n.byteOffset||0;return e.slice(o,o+r)})}loadAccessor(t){const n=this,e=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){const i=En[r.type],l=Ot[r.componentType],a=r.normalized===!0,u=new l(r.count*i);return Promise.resolve(new jt(u,i,a))}const o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(i){const l=i[0],a=En[r.type],u=Ot[r.componentType],B=u.BYTES_PER_ELEMENT,d=B*a,C=r.byteOffset||0,g=r.bufferView!==void 0?e.bufferViews[r.bufferView].byteStride:void 0,M=r.normalized===!0;let y,I;if(g&&g!==d){const T=Math.floor(C/g),k="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+T+":"+r.count;let v=n.cache.get(k);v||(y=new u(l,T*g,r.count*g/B),v=new Jr(y,g/B),n.cache.add(k,v)),I=new is(v,a,C%g/B,M)}else l===null?y=new u(r.count*a):y=new u(l,C,r.count*a),I=new jt(y,a,M);if(r.sparse!==void 0){const T=En.SCALAR,k=Ot[r.sparse.indices.componentType],v=r.sparse.indices.byteOffset||0,U=r.sparse.values.byteOffset||0,J=new k(i[1],v,r.sparse.count*T),R=new u(i[2],U,r.sparse.count*a);l!==null&&(I=new jt(I.array.slice(),I.itemSize,I.normalized));for(let X=0,_=J.length;X<_;X++){const O=J[X];if(I.setX(O,R[X*a]),a>=2&&I.setY(O,R[X*a+1]),a>=3&&I.setZ(O,R[X*a+2]),a>=4&&I.setW(O,R[X*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return I})}loadTexture(t){const n=this.json,e=this.options,o=n.textures[t].source,i=n.images[o];let l=this.textureLoader;if(i.uri){const a=e.manager.getHandler(i.uri);a!==null&&(l=a)}return this.loadTextureImage(t,o,l)}loadTextureImage(t,n,e){const r=this,o=this.json,i=o.textures[t],l=o.images[n],a=(l.uri||l.bufferView)+":"+i.sampler;if(this.textureCache[a])return this.textureCache[a];const u=this.loadImageSource(n,e).then(function(B){B.flipY=!1,B.name=i.name||l.name||"",B.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(B.name=l.uri);const C=(o.samplers||{})[i.sampler]||{};return B.magFilter=Wn[C.magFilter]||Ut,B.minFilter=Wn[C.minFilter]||ir,B.wrapS=Vn[C.wrapS]||Tn,B.wrapT=Vn[C.wrapT]||Tn,r.associations.set(B,{textures:t}),B}).catch(function(){return null});return this.textureCache[a]=u,u}loadImageSource(t,n){const e=this,r=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(d=>d.clone());const i=r.images[t],l=self.URL||self.webkitURL;let a=i.uri||"",u=!1;if(i.bufferView!==void 0)a=e.getDependency("bufferView",i.bufferView).then(function(d){u=!0;const C=new Blob([d],{type:i.mimeType});return a=l.createObjectURL(C),a});else if(i.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const B=Promise.resolve(a).then(function(d){return new Promise(function(C,g){let M=C;n.isImageBitmapLoader===!0&&(M=function(y){const I=new bn(y);I.needsUpdate=!0,C(I)}),n.load(gt.resolveURL(d,o.path),M,void 0,g)})}).then(function(d){return u===!0&&l.revokeObjectURL(a),d.userData.mimeType=i.mimeType||yo(i.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),d});return this.sourceCache[t]=B,B}assignTexture(t,n,e,r){const o=this;return this.getDependency("texture",e.index).then(function(i){if(!i)return null;if(e.texCoord!==void 0&&e.texCoord>0&&(i=i.clone(),i.channel=e.texCoord),o.extensions[$.KHR_TEXTURE_TRANSFORM]){const l=e.extensions!==void 0?e.extensions[$.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const a=o.associations.get(i);i=o.extensions[$.KHR_TEXTURE_TRANSFORM].extendTexture(i,l),o.associations.set(i,a)}}return r!==void 0&&("colorSpace"in i?i.colorSpace=r===3001?"srgb":"srgb-linear":i.encoding=r),t[n]=i,i})}assignFinalMaterial(t){const n=t.geometry;let e=t.material;const r=n.attributes.tangent===void 0,o=n.attributes.color!==void 0,i=n.attributes.normal===void 0;if(t.isPoints){const l="PointsMaterial:"+e.uuid;let a=this.cache.get(l);a||(a=new Nr,fn.prototype.copy.call(a,e),a.color.copy(e.color),a.map=e.map,a.sizeAttenuation=!1,this.cache.add(l,a)),e=a}else if(t.isLine){const l="LineBasicMaterial:"+e.uuid;let a=this.cache.get(l);a||(a=new Kr,fn.prototype.copy.call(a,e),a.color.copy(e.color),a.map=e.map,this.cache.add(l,a)),e=a}if(r||o||i){let l="ClonedMaterial:"+e.uuid+":";r&&(l+="derivative-tangents:"),o&&(l+="vertex-colors:"),i&&(l+="flat-shading:");let a=this.cache.get(l);a||(a=e.clone(),o&&(a.vertexColors=!0),i&&(a.flatShading=!0),r&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(l,a),this.associations.set(a,this.associations.get(e))),e=a}t.material=e}getMaterialType(){return ar}loadMaterial(t){const n=this,e=this.json,r=this.extensions,o=e.materials[t];let i;const l={},a=o.extensions||{},u=[];if(a[$.KHR_MATERIALS_UNLIT]){const d=r[$.KHR_MATERIALS_UNLIT];i=d.getMaterialType(),u.push(d.extendParams(l,o,n))}else{const d=o.pbrMetallicRoughness||{};if(l.color=new ct(1,1,1),l.opacity=1,Array.isArray(d.baseColorFactor)){const C=d.baseColorFactor;l.color.fromArray(C),l.opacity=C[3]}d.baseColorTexture!==void 0&&u.push(n.assignTexture(l,"map",d.baseColorTexture,3001)),l.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,l.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(l,"metalnessMap",d.metallicRoughnessTexture)),u.push(n.assignTexture(l,"roughnessMap",d.metallicRoughnessTexture))),i=this._invokeOne(function(C){return C.getMaterialType&&C.getMaterialType(t)}),u.push(Promise.all(this._invokeAll(function(C){return C.extendMaterialParams&&C.extendMaterialParams(t,l)})))}o.doubleSided===!0&&(l.side=wn);const B=o.alphaMode||gn.OPAQUE;if(B===gn.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,B===gn.MASK&&(l.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&i!==kt&&(u.push(n.assignTexture(l,"normalMap",o.normalTexture)),l.normalScale=new Pe(1,1),o.normalTexture.scale!==void 0)){const d=o.normalTexture.scale;l.normalScale.set(d,d)}return o.occlusionTexture!==void 0&&i!==kt&&(u.push(n.assignTexture(l,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&i!==kt&&(l.emissive=new ct().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&i!==kt&&u.push(n.assignTexture(l,"emissiveMap",o.emissiveTexture,3001)),Promise.all(u).then(function(){const d=new i(l);return o.name&&(d.name=o.name),it(d,o),n.associations.set(d,{materials:t}),o.extensions&&mt(r,d,o),d})}createUniqueName(t){const n=kr.sanitizeNodeName(t||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(t){const n=this,e=this.extensions,r=this.primitiveCache;function o(l){return e[$.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,n).then(function(a){return zn(a,l,n)})}const i=[];for(let l=0,a=t.length;l<a;l++){const u=t[l],B=Go(u),d=r[B];if(d)i.push(d.promise);else{let C;u.extensions&&u.extensions[$.KHR_DRACO_MESH_COMPRESSION]?C=o(u):C=zn(new cr,u,n),r[B]={primitive:u,promise:C},i.push(C)}}return Promise.all(i)}loadMesh(t){const n=this,e=this.json,r=this.extensions,o=e.meshes[t],i=o.primitives,l=[];for(let a=0,u=i.length;a<u;a++){const B=i[a].material===void 0?Do(this.cache):this.getDependency("material",i[a].material);l.push(B)}return l.push(n.loadGeometries(i)),Promise.all(l).then(function(a){const u=a.slice(0,a.length-1),B=a[a.length-1],d=[];for(let g=0,M=B.length;g<M;g++){const y=B[g],I=i[g];let T;const k=u[g];if(I.mode===Qe.TRIANGLES||I.mode===Qe.TRIANGLE_STRIP||I.mode===Qe.TRIANGLE_FAN||I.mode===void 0)T=o.isSkinnedMesh===!0?new Qr(y,k):new On(y,k),T.isSkinnedMesh===!0&&T.normalizeSkinWeights(),I.mode===Qe.TRIANGLE_STRIP?T.geometry=Xn(T.geometry,nr):I.mode===Qe.TRIANGLE_FAN&&(T.geometry=Xn(T.geometry,Rn));else if(I.mode===Qe.LINES)T=new Xr(y,k);else if(I.mode===Qe.LINE_STRIP)T=new jr(y,k);else if(I.mode===Qe.LINE_LOOP)T=new Yr(y,k);else if(I.mode===Qe.POINTS)T=new Zr(y,k);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+I.mode);Object.keys(T.geometry.morphAttributes).length>0&&bo(T,o),T.name=n.createUniqueName(o.name||"mesh_"+t),it(T,o),I.extensions&&mt(r,T,I),n.assignFinalMaterial(T),d.push(T)}for(let g=0,M=d.length;g<M;g++)n.associations.set(d[g],{meshes:t,primitives:g});if(d.length===1)return o.extensions&&mt(r,d[0],o),d[0];const C=new Cn;o.extensions&&mt(r,C,o),n.associations.set(C,{meshes:t});for(let g=0,M=d.length;g<M;g++)C.add(d[g]);return C})}loadCamera(t){let n;const e=this.json.cameras[t],r=e[e.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return e.type==="perspective"?n=new Et(Qt.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):e.type==="orthographic"&&(n=new pt(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),e.name&&(n.name=this.createUniqueName(e.name)),it(n,e),Promise.resolve(n)}loadSkin(t){const n=this.json.skins[t],e=[];for(let r=0,o=n.joints.length;r<o;r++)e.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?e.push(this.getDependency("accessor",n.inverseBindMatrices)):e.push(null),Promise.all(e).then(function(r){const o=r.pop(),i=r,l=[],a=[];for(let u=0,B=i.length;u<B;u++){const d=i[u];if(d){l.push(d);const C=new cn;o!==null&&C.fromArray(o.array,u*16),a.push(C)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new Wr(l,a)})}loadAnimation(t){const e=this.json.animations[t],r=e.name?e.name:"animation_"+t,o=[],i=[],l=[],a=[],u=[];for(let B=0,d=e.channels.length;B<d;B++){const C=e.channels[B],g=e.samplers[C.sampler],M=C.target,y=M.node,I=e.parameters!==void 0?e.parameters[g.input]:g.input,T=e.parameters!==void 0?e.parameters[g.output]:g.output;M.node!==void 0&&(o.push(this.getDependency("node",y)),i.push(this.getDependency("accessor",I)),l.push(this.getDependency("accessor",T)),a.push(g),u.push(M))}return Promise.all([Promise.all(o),Promise.all(i),Promise.all(l),Promise.all(a),Promise.all(u)]).then(function(B){const d=B[0],C=B[1],g=B[2],M=B[3],y=B[4],I=[];for(let T=0,k=d.length;T<k;T++){const v=d[T],U=C[T],J=g[T],R=M[T],X=y[T];if(v===void 0)continue;v.updateMatrix();let _;switch(ot[X.path]){case ot.weights:_=cs;break;case ot.rotation:_=kn;break;case ot.position:case ot.scale:default:_=as;break}const O=v.name?v.name:v.uuid,N=R.interpolation!==void 0?Ro[R.interpolation]:lr,P=[];ot[X.path]===ot.weights?v.traverse(function(ne){ne.morphTargetInfluences&&P.push(ne.name?ne.name:ne.uuid)}):P.push(O);let te=J.array;if(J.normalized){const ne=Ln(te.constructor),z=new Float32Array(te.length);for(let Z=0,he=te.length;Z<he;Z++)z[Z]=te[Z]*ne;te=z}for(let ne=0,z=P.length;ne<z;ne++){const Z=new _(P[ne]+"."+ot[X.path],U.array,te,N);R.interpolation==="CUBICSPLINE"&&(Z.createInterpolant=function(ee){const oe=this instanceof kn?Fo:gr;return new oe(this.times,this.values,this.getValueSize()/3,ee)},Z.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),I.push(Z)}}return new Vr(r,void 0,I)})}createNodeMesh(t){const n=this.json,e=this,r=n.nodes[t];return r.mesh===void 0?null:e.getDependency("mesh",r.mesh).then(function(o){const i=e._getNodeRef(e.meshCache,r.mesh,o);return r.weights!==void 0&&i.traverse(function(l){if(l.isMesh)for(let a=0,u=r.weights.length;a<u;a++)l.morphTargetInfluences[a]=r.weights[a]}),i})}loadNode(t){const n=this.json,e=this,r=n.nodes[t],o=e._loadNodeShallow(t),i=[],l=r.children||[];for(let u=0,B=l.length;u<B;u++)i.push(e.getDependency("node",l[u]));const a=r.skin===void 0?Promise.resolve(null):e.getDependency("skin",r.skin);return Promise.all([o,Promise.all(i),a]).then(function(u){const B=u[0],d=u[1],C=u[2];C!==null&&B.traverse(function(g){g.isSkinnedMesh&&g.bind(C,Ho)});for(let g=0,M=d.length;g<M;g++)B.add(d[g]);return B})}_loadNodeShallow(t){const n=this.json,e=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const o=n.nodes[t],i=o.name?r.createUniqueName(o.name):"",l=[],a=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(t)});return a&&l.push(a),o.camera!==void 0&&l.push(r.getDependency("camera",o.camera).then(function(u){return r._getNodeRef(r.cameraCache,o.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(t)}).forEach(function(u){l.push(u)}),this.nodeCache[t]=Promise.all(l).then(function(u){let B;if(o.isBone===!0?B=new zr:u.length>1?B=new Cn:u.length===1?B=u[0]:B=new or,B!==u[0])for(let d=0,C=u.length;d<C;d++)B.add(u[d]);if(o.name&&(B.userData.name=o.name,B.name=i),it(B,o),o.extensions&&mt(e,B,o),o.matrix!==void 0){const d=new cn;d.fromArray(o.matrix),B.applyMatrix4(d)}else o.translation!==void 0&&B.position.fromArray(o.translation),o.rotation!==void 0&&B.quaternion.fromArray(o.rotation),o.scale!==void 0&&B.scale.fromArray(o.scale);return r.associations.has(B)||r.associations.set(B,{}),r.associations.get(B).nodes=t,B}),this.nodeCache[t]}loadScene(t){const n=this.extensions,e=this.json.scenes[t],r=this,o=new Cn;e.name&&(o.name=r.createUniqueName(e.name)),it(o,e),e.extensions&&mt(n,o,e);const i=e.nodes||[],l=[];for(let a=0,u=i.length;a<u;a++)l.push(r.getDependency("node",i[a]));return Promise.all(l).then(function(a){for(let B=0,d=a.length;B<d;B++)o.add(a[B]);const u=B=>{const d=new Map;for(const[C,g]of r.associations)(C instanceof fn||C instanceof bn)&&d.set(C,g);return B.traverse(C=>{const g=r.associations.get(C);g!=null&&d.set(C,g)}),d};return r.associations=u(o),o})}}function Lo(A,t,n){const e=t.attributes,r=new ls;if(e.POSITION!==void 0){const l=n.json.accessors[e.POSITION],a=l.min,u=l.max;if(a!==void 0&&u!==void 0){if(r.set(new Ee(a[0],a[1],a[2]),new Ee(u[0],u[1],u[2])),l.normalized){const B=Ln(Ot[l.componentType]);r.min.multiplyScalar(B),r.max.multiplyScalar(B)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=t.targets;if(o!==void 0){const l=new Ee,a=new Ee;for(let u=0,B=o.length;u<B;u++){const d=o[u];if(d.POSITION!==void 0){const C=n.json.accessors[d.POSITION],g=C.min,M=C.max;if(g!==void 0&&M!==void 0){if(a.setX(Math.max(Math.abs(g[0]),Math.abs(M[0]))),a.setY(Math.max(Math.abs(g[1]),Math.abs(M[1]))),a.setZ(Math.max(Math.abs(g[2]),Math.abs(M[2]))),C.normalized){const y=Ln(Ot[C.componentType]);a.multiplyScalar(y)}l.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}A.boundingBox=r;const i=new As;r.getCenter(i.center),i.radius=r.min.distanceTo(r.max)/2,A.boundingSphere=i}function zn(A,t,n){const e=t.attributes,r=[];function o(i,l){return n.getDependency("accessor",i).then(function(a){A.setAttribute(l,a)})}for(const i in e){const l=Sn[i]||i.toLowerCase();l in A.attributes||r.push(o(e[i],l))}if(t.indices!==void 0&&!A.index){const i=n.getDependency("accessor",t.indices).then(function(l){A.setIndex(l)});r.push(i)}return it(A,t),Lo(A,t,n),Promise.all(r).then(function(){return t.targets!==void 0?To(A,t.targets,n):A})}const wo={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},Oo={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class Uo extends Ar{constructor(t){super(t),this.type=et}parse(t){const l=function(v,U){switch(v){case 1:console.error("THREE.RGBELoader Read Error: "+(U||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(U||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(U||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(U||""))}return-1},d=`
`,C=function(v,U,J){U=U||1024;let X=v.pos,_=-1,O=0,N="",P=String.fromCharCode.apply(null,new Uint16Array(v.subarray(X,X+128)));for(;0>(_=P.indexOf(d))&&O<U&&X<v.byteLength;)N+=P,O+=P.length,X+=128,P+=String.fromCharCode.apply(null,new Uint16Array(v.subarray(X,X+128)));return-1<_?(J!==!1&&(v.pos+=O+_+1),N+P.slice(0,_)):!1},g=function(v){const U=/^#\?(\S+)/,J=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,R=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,X=/^\s*FORMAT=(\S+)\s*$/,_=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,O={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let N,P;if(v.pos>=v.byteLength||!(N=C(v)))return l(1,"no header found");if(!(P=N.match(U)))return l(3,"bad initial token");for(O.valid|=1,O.programtype=P[1],O.string+=N+`
`;N=C(v),N!==!1;){if(O.string+=N+`
`,N.charAt(0)==="#"){O.comments+=N+`
`;continue}if((P=N.match(J))&&(O.gamma=parseFloat(P[1])),(P=N.match(R))&&(O.exposure=parseFloat(P[1])),(P=N.match(X))&&(O.valid|=2,O.format=P[1]),(P=N.match(_))&&(O.valid|=4,O.height=parseInt(P[1],10),O.width=parseInt(P[2],10)),O.valid&2&&O.valid&4)break}return O.valid&2?O.valid&4?O:l(3,"missing image size specifier"):l(3,"missing format specifier")},M=function(v,U,J){const R=U;if(R<8||R>32767||v[0]!==2||v[1]!==2||v[2]&128)return new Uint8Array(v);if(R!==(v[2]<<8|v[3]))return l(3,"wrong scanline width");const X=new Uint8Array(4*U*J);if(!X.length)return l(4,"unable to allocate buffer space");let _=0,O=0;const N=4*R,P=new Uint8Array(4),te=new Uint8Array(N);let ne=J;for(;ne>0&&O<v.byteLength;){if(O+4>v.byteLength)return l(1);if(P[0]=v[O++],P[1]=v[O++],P[2]=v[O++],P[3]=v[O++],P[0]!=2||P[1]!=2||(P[2]<<8|P[3])!=R)return l(3,"bad rgbe scanline format");let z=0,Z;for(;z<N&&O<v.byteLength;){Z=v[O++];const ee=Z>128;if(ee&&(Z-=128),Z===0||z+Z>N)return l(3,"bad scanline data");if(ee){const oe=v[O++];for(let ge=0;ge<Z;ge++)te[z++]=oe}else te.set(v.subarray(O,O+Z),z),z+=Z,O+=Z}const he=R;for(let ee=0;ee<he;ee++){let oe=0;X[_]=te[ee+oe],oe+=R,X[_+1]=te[ee+oe],oe+=R,X[_+2]=te[ee+oe],oe+=R,X[_+3]=te[ee+oe],_+=4}ne--}return X},y=function(v,U,J,R){const X=v[U+3],_=Math.pow(2,X-128)/255;J[R+0]=v[U+0]*_,J[R+1]=v[U+1]*_,J[R+2]=v[U+2]*_,J[R+3]=1},I=function(v,U,J,R){const X=v[U+3],_=Math.pow(2,X-128)/255;J[R+0]=Lt.toHalfFloat(Math.min(v[U+0]*_,65504)),J[R+1]=Lt.toHalfFloat(Math.min(v[U+1]*_,65504)),J[R+2]=Lt.toHalfFloat(Math.min(v[U+2]*_,65504)),J[R+3]=Lt.toHalfFloat(1)},T=new Uint8Array(t);T.pos=0;const k=g(T);if(k!==-1){const v=k.width,U=k.height,J=M(T.subarray(T.pos),v,U);if(J!==-1){let R,X,_;switch(this.type){case wt:_=J.length/4;const O=new Float32Array(_*4);for(let P=0;P<_;P++)y(J,P*4,O,P*4);R=O,X=wt;break;case et:_=J.length/4;const N=new Uint16Array(_*4);for(let P=0;P<_;P++)I(J,P*4,N,P*4);R=N,X=et;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:v,height:U,data:R,header:k.string,gamma:k.gamma,exposure:k.exposure,type:X}}}return null}setDataType(t){return this.type=t,this}load(t,n,e,r){function o(i,l){switch(i.type){case wt:case et:"colorSpace"in i?i.colorSpace="srgb-linear":i.encoding=3e3,i.minFilter=Ut,i.magFilter=Ut,i.generateMipmaps=!1,i.flipY=!0;break}n&&n(i,l)}return super.load(t,o,e,r)}}const Kt="colorSpace"in new bn;class _o extends Ar{constructor(t){super(t),this.type=et}parse(t){const O=Math.pow(2.7182818,2.2);function N(s,c){for(var h=0,m=0;m<65536;++m)(m==0||s[m>>3]&1<<(m&7))&&(c[h++]=m);for(var p=h-1;h<65536;)c[h++]=0;return p}function P(s){for(var c=0;c<16384;c++)s[c]={},s[c].len=0,s[c].lit=0,s[c].p=null}const te={l:0,c:0,lc:0};function ne(s,c,h,m,p){for(;h<s;)c=c<<8|bt(m,p),h+=8;h-=s,te.l=c>>h&(1<<s)-1,te.c=c,te.lc=h}const z=new Array(59);function Z(s){for(var c=0;c<=58;++c)z[c]=0;for(var c=0;c<65537;++c)z[s[c]]+=1;for(var h=0,c=58;c>0;--c){var m=h+z[c]>>1;z[c]=h,h=m}for(var c=0;c<65537;++c){var p=s[c];p>0&&(s[c]=p|z[p]++<<6)}}function he(s,c,h,m,p,E,b){for(var F=h,L=0,S=0;p<=E;p++){if(F.value-h.value>m)return!1;ne(6,L,S,s,F);var w=te.l;if(L=te.c,S=te.lc,b[p]=w,w==63){if(F.value-h.value>m)throw"Something wrong with hufUnpackEncTable";ne(8,L,S,s,F);var H=te.l+6;if(L=te.c,S=te.lc,p+H>E+1)throw"Something wrong with hufUnpackEncTable";for(;H--;)b[p++]=0;p--}else if(w>=59){var H=w-59+2;if(p+H>E+1)throw"Something wrong with hufUnpackEncTable";for(;H--;)b[p++]=0;p--}}Z(b)}function ee(s){return s&63}function oe(s){return s>>6}function ge(s,c,h,m){for(;c<=h;c++){var p=oe(s[c]),E=ee(s[c]);if(p>>E)throw"Invalid table entry";if(E>14){var b=m[p>>E-14];if(b.len)throw"Invalid table entry";if(b.lit++,b.p){var F=b.p;b.p=new Array(b.lit);for(var L=0;L<b.lit-1;++L)b.p[L]=F[L]}else b.p=new Array(1);b.p[b.lit-1]=c}else if(E)for(var S=0,L=1<<14-E;L>0;L--){var b=m[(p<<14-E)+S];if(b.len||b.p)throw"Invalid table entry";b.len=E,b.lit=c,S++}}return!0}const ce={c:0,lc:0};function ve(s,c,h,m){s=s<<8|bt(h,m),c+=8,ce.c=s,ce.lc=c}const de={c:0,lc:0};function Ie(s,c,h,m,p,E,b,F,L,S){if(s==c){m<8&&(ve(h,m,p,b),h=ce.c,m=ce.lc),m-=8;var w=h>>m,w=new Uint8Array([w])[0];if(L.value+w>S)return!1;for(var H=F[L.value-1];w-- >0;)F[L.value++]=H}else if(L.value<S)F[L.value++]=s;else return!1;de.c=h,de.lc=m}function we(s){return s&65535}function Oe(s){var c=we(s);return c>32767?c-65536:c}const se={a:0,b:0};function Ue(s,c){var h=Oe(s),m=Oe(c),p=m,E=h+(p&1)+(p>>1),b=E,F=E-p;se.a=b,se.b=F}function Re(s,c){var h=we(s),m=we(c),p=h-(m>>1)&65535,E=m+p-32768&65535;se.a=E,se.b=p}function vt(s,c,h,m,p,E,b){for(var F=b<16384,L=h>p?p:h,S=1,w;S<=L;)S<<=1;for(S>>=1,w=S,S>>=1;S>=1;){for(var H=0,pe=H+E*(p-w),Q=E*S,j=E*w,W=m*S,V=m*w,le,ue,Fe,Se;H<=pe;H+=j){for(var Be=H,ze=H+m*(h-w);Be<=ze;Be+=V){var fe=Be+W,De=Be+Q,$e=De+W;F?(Ue(s[Be+c],s[De+c]),le=se.a,Fe=se.b,Ue(s[fe+c],s[$e+c]),ue=se.a,Se=se.b,Ue(le,ue),s[Be+c]=se.a,s[fe+c]=se.b,Ue(Fe,Se),s[De+c]=se.a,s[$e+c]=se.b):(Re(s[Be+c],s[De+c]),le=se.a,Fe=se.b,Re(s[fe+c],s[$e+c]),ue=se.a,Se=se.b,Re(le,ue),s[Be+c]=se.a,s[fe+c]=se.b,Re(Fe,Se),s[De+c]=se.a,s[$e+c]=se.b)}if(h&S){var De=Be+Q;F?Ue(s[Be+c],s[De+c]):Re(s[Be+c],s[De+c]),le=se.a,s[De+c]=se.b,s[Be+c]=le}}if(p&S)for(var Be=H,ze=H+m*(h-w);Be<=ze;Be+=V){var fe=Be+W;F?Ue(s[Be+c],s[fe+c]):Re(s[Be+c],s[fe+c]),le=se.a,s[fe+c]=se.b,s[Be+c]=le}w=S,S>>=1}return H}function Te(s,c,h,m,p,E,b,F,L,S){for(var w=0,H=0,pe=F,Q=Math.trunc(p.value+(E+7)/8);p.value<Q;)for(ve(w,H,h,p),w=ce.c,H=ce.lc;H>=14;){var j=w>>H-14&16383,W=c[j];if(W.len)H-=W.len,Ie(W.lit,b,w,H,h,m,p,L,S,pe),w=de.c,H=de.lc;else{if(!W.p)throw"hufDecode issues";var V;for(V=0;V<W.lit;V++){for(var le=ee(s[W.p[V]]);H<le&&p.value<Q;)ve(w,H,h,p),w=ce.c,H=ce.lc;if(H>=le&&oe(s[W.p[V]])==(w>>H-le&(1<<le)-1)){H-=le,Ie(W.p[V],b,w,H,h,m,p,L,S,pe),w=de.c,H=de.lc;break}}if(V==W.lit)throw"hufDecode issues"}}var ue=8-E&7;for(w>>=ue,H-=ue;H>0;){var W=c[w<<14-H&16383];if(W.len)H-=W.len,Ie(W.lit,b,w,H,h,m,p,L,S,pe),w=de.c,H=de.lc;else throw"hufDecode issues"}return!0}function ie(s,c,h,m,p,E){var b={value:0},F=h.value,L=be(c,h),S=be(c,h);h.value+=4;var w=be(c,h);if(h.value+=4,L<0||L>=65537||S<0||S>=65537)throw"Something wrong with HUF_ENCSIZE";var H=new Array(65537),pe=new Array(16384);P(pe);var Q=m-(h.value-F);if(he(s,c,h,Q,L,S,H),w>8*(m-(h.value-F)))throw"Something wrong with hufUncompress";ge(H,L,S,pe),Te(H,pe,s,c,h,w,S,E,p,b)}function xe(s,c,h){for(var m=0;m<h;++m)c[m]=s[c[m]]}function ye(s){for(var c=1;c<s.length;c++){var h=s[c-1]+s[c]-128;s[c]=h}}function We(s,c){for(var h=0,m=Math.floor((s.length+1)/2),p=0,E=s.length-1;!(p>E||(c[p++]=s[h++],p>E));)c[p++]=s[m++]}function qe(s){for(var c=s.byteLength,h=new Array,m=0,p=new DataView(s);c>0;){var E=p.getInt8(m++);if(E<0){var b=-E;c-=b+1;for(var F=0;F<b;F++)h.push(p.getUint8(m++))}else{var b=E;c-=2;for(var L=p.getUint8(m++),F=0;F<b+1;F++)h.push(L)}}return h}function Mt(s,c,h,m,p,E){var fe=new DataView(E.buffer),b=h[s.idx[0]].width,F=h[s.idx[0]].height,L=3,S=Math.floor(b/8),w=Math.ceil(b/8),H=Math.ceil(F/8),pe=b-(w-1)*8,Q=F-(H-1)*8,j={value:0},W=new Array(L),V=new Array(L),le=new Array(L),ue=new Array(L),Fe=new Array(L);for(let Ae=0;Ae<L;++Ae)Fe[Ae]=c[s.idx[Ae]],W[Ae]=Ae<1?0:W[Ae-1]+w*H,V[Ae]=new Float32Array(64),le[Ae]=new Uint16Array(64),ue[Ae]=new Uint16Array(w*64);for(let Ae=0;Ae<H;++Ae){var Se=8;Ae==H-1&&(Se=Q);var Be=8;for(let me=0;me<w;++me){me==w-1&&(Be=pe);for(let ae=0;ae<L;++ae)le[ae].fill(0),le[ae][0]=p[W[ae]++],Je(j,m,le[ae]),At(le[ae],V[ae]),ut(V[ae]);It(V);for(let ae=0;ae<L;++ae)Ft(V[ae],ue[ae],me*64)}let Ge=0;for(let me=0;me<L;++me){const ae=h[s.idx[me]].type;for(let ke=8*Ae;ke<8*Ae+Se;++ke){Ge=Fe[me][ke];for(let Ct=0;Ct<S;++Ct){const _e=Ct*64+(ke&7)*8;fe.setUint16(Ge+0*2*ae,ue[me][_e+0],!0),fe.setUint16(Ge+1*2*ae,ue[me][_e+1],!0),fe.setUint16(Ge+2*2*ae,ue[me][_e+2],!0),fe.setUint16(Ge+3*2*ae,ue[me][_e+3],!0),fe.setUint16(Ge+4*2*ae,ue[me][_e+4],!0),fe.setUint16(Ge+5*2*ae,ue[me][_e+5],!0),fe.setUint16(Ge+6*2*ae,ue[me][_e+6],!0),fe.setUint16(Ge+7*2*ae,ue[me][_e+7],!0),Ge+=8*2*ae}}if(S!=w)for(let ke=8*Ae;ke<8*Ae+Se;++ke){const Ct=Fe[me][ke]+8*S*2*ae,_e=S*64+(ke&7)*8;for(let rt=0;rt<Be;++rt)fe.setUint16(Ct+rt*2*ae,ue[me][_e+rt],!0)}}}for(var ze=new Uint16Array(b),fe=new DataView(E.buffer),De=0;De<L;++De){h[s.idx[De]].decoded=!0;var $e=h[s.idx[De]].type;if(h[De].type==2)for(var Jt=0;Jt<F;++Jt){const Ae=Fe[De][Jt];for(var Ke=0;Ke<b;++Ke)ze[Ke]=fe.getUint16(Ae+Ke*2*$e,!0);for(var Ke=0;Ke<b;++Ke)fe.setFloat32(Ae+Ke*2*$e,G(ze[Ke]),!0)}}}function Je(s,c,h){for(var m,p=1;p<64;)m=c[s.value],m==65280?p=64:m>>8==255?p+=m&255:(h[p]=m,p++),s.value++}function At(s,c){c[0]=G(s[0]),c[1]=G(s[1]),c[2]=G(s[5]),c[3]=G(s[6]),c[4]=G(s[14]),c[5]=G(s[15]),c[6]=G(s[27]),c[7]=G(s[28]),c[8]=G(s[2]),c[9]=G(s[4]),c[10]=G(s[7]),c[11]=G(s[13]),c[12]=G(s[16]),c[13]=G(s[26]),c[14]=G(s[29]),c[15]=G(s[42]),c[16]=G(s[3]),c[17]=G(s[8]),c[18]=G(s[12]),c[19]=G(s[17]),c[20]=G(s[25]),c[21]=G(s[30]),c[22]=G(s[41]),c[23]=G(s[43]),c[24]=G(s[9]),c[25]=G(s[11]),c[26]=G(s[18]),c[27]=G(s[24]),c[28]=G(s[31]),c[29]=G(s[40]),c[30]=G(s[44]),c[31]=G(s[53]),c[32]=G(s[10]),c[33]=G(s[19]),c[34]=G(s[23]),c[35]=G(s[32]),c[36]=G(s[39]),c[37]=G(s[45]),c[38]=G(s[52]),c[39]=G(s[54]),c[40]=G(s[20]),c[41]=G(s[22]),c[42]=G(s[33]),c[43]=G(s[38]),c[44]=G(s[46]),c[45]=G(s[51]),c[46]=G(s[55]),c[47]=G(s[60]),c[48]=G(s[21]),c[49]=G(s[34]),c[50]=G(s[37]),c[51]=G(s[47]),c[52]=G(s[50]),c[53]=G(s[56]),c[54]=G(s[59]),c[55]=G(s[61]),c[56]=G(s[35]),c[57]=G(s[36]),c[58]=G(s[48]),c[59]=G(s[49]),c[60]=G(s[57]),c[61]=G(s[58]),c[62]=G(s[62]),c[63]=G(s[63])}function ut(s){const c=.5*Math.cos(.7853975),h=.5*Math.cos(3.14159/16),m=.5*Math.cos(3.14159/8),p=.5*Math.cos(3*3.14159/16),E=.5*Math.cos(5*3.14159/16),b=.5*Math.cos(3*3.14159/8),F=.5*Math.cos(7*3.14159/16);for(var L=new Array(4),S=new Array(4),w=new Array(4),H=new Array(4),pe=0;pe<8;++pe){var Q=pe*8;L[0]=m*s[Q+2],L[1]=b*s[Q+2],L[2]=m*s[Q+6],L[3]=b*s[Q+6],S[0]=h*s[Q+1]+p*s[Q+3]+E*s[Q+5]+F*s[Q+7],S[1]=p*s[Q+1]-F*s[Q+3]-h*s[Q+5]-E*s[Q+7],S[2]=E*s[Q+1]-h*s[Q+3]+F*s[Q+5]+p*s[Q+7],S[3]=F*s[Q+1]-E*s[Q+3]+p*s[Q+5]-h*s[Q+7],w[0]=c*(s[Q+0]+s[Q+4]),w[3]=c*(s[Q+0]-s[Q+4]),w[1]=L[0]+L[3],w[2]=L[1]-L[2],H[0]=w[0]+w[1],H[1]=w[3]+w[2],H[2]=w[3]-w[2],H[3]=w[0]-w[1],s[Q+0]=H[0]+S[0],s[Q+1]=H[1]+S[1],s[Q+2]=H[2]+S[2],s[Q+3]=H[3]+S[3],s[Q+4]=H[3]-S[3],s[Q+5]=H[2]-S[2],s[Q+6]=H[1]-S[1],s[Q+7]=H[0]-S[0]}for(var j=0;j<8;++j)L[0]=m*s[16+j],L[1]=b*s[16+j],L[2]=m*s[48+j],L[3]=b*s[48+j],S[0]=h*s[8+j]+p*s[24+j]+E*s[40+j]+F*s[56+j],S[1]=p*s[8+j]-F*s[24+j]-h*s[40+j]-E*s[56+j],S[2]=E*s[8+j]-h*s[24+j]+F*s[40+j]+p*s[56+j],S[3]=F*s[8+j]-E*s[24+j]+p*s[40+j]-h*s[56+j],w[0]=c*(s[j]+s[32+j]),w[3]=c*(s[j]-s[32+j]),w[1]=L[0]+L[3],w[2]=L[1]-L[2],H[0]=w[0]+w[1],H[1]=w[3]+w[2],H[2]=w[3]-w[2],H[3]=w[0]-w[1],s[0+j]=H[0]+S[0],s[8+j]=H[1]+S[1],s[16+j]=H[2]+S[2],s[24+j]=H[3]+S[3],s[32+j]=H[3]-S[3],s[40+j]=H[2]-S[2],s[48+j]=H[1]-S[1],s[56+j]=H[0]-S[0]}function It(s){for(var c=0;c<64;++c){var h=s[0][c],m=s[1][c],p=s[2][c];s[0][c]=h+1.5747*p,s[1][c]=h-.1873*m-.4682*p,s[2][c]=h+1.8556*m}}function Ft(s,c,h){for(var m=0;m<64;++m)c[h+m]=Lt.toHalfFloat(Bt(s[m]))}function Bt(s){return s<=1?Math.sign(s)*Math.pow(Math.abs(s),2.2):Math.sign(s)*Math.pow(O,Math.abs(s)-1)}function tt(s){return new DataView(s.array.buffer,s.offset.value,s.size)}function Rt(s){var c=s.viewer.buffer.slice(s.offset.value,s.offset.value+s.size),h=new Uint8Array(qe(c)),m=new Uint8Array(h.length);return ye(h),We(h,m),new DataView(m.buffer)}function ht(s){var c=s.array.slice(s.offset.value,s.offset.value+s.size),h=tn(c),m=new Uint8Array(h.length);return ye(h),We(h,m),new DataView(m.buffer)}function _t(s){for(var c=s.viewer,h={value:s.offset.value},m=new Uint16Array(s.width*s.scanlineBlockSize*(s.channels*s.type)),p=new Uint8Array(8192),E=0,b=new Array(s.channels),F=0;F<s.channels;F++)b[F]={},b[F].start=E,b[F].end=b[F].start,b[F].nx=s.width,b[F].ny=s.lines,b[F].size=s.type,E+=b[F].nx*b[F].ny*b[F].size;var L=He(c,h),S=He(c,h);if(S>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(L<=S)for(var F=0;F<S-L+1;F++)p[F+L]=f(c,h);var w=new Uint16Array(65536),H=N(p,w),pe=be(c,h);ie(s.array,c,h,pe,m,E);for(var F=0;F<s.channels;++F)for(var Q=b[F],j=0;j<b[F].size;++j)vt(m,Q.start+j,Q.nx,Q.size,Q.ny,Q.nx*Q.size,H);xe(w,m,E);for(var W=0,V=new Uint8Array(m.buffer.byteLength),le=0;le<s.lines;le++)for(var ue=0;ue<s.channels;ue++){var Q=b[ue],Fe=Q.nx*Q.size,Se=new Uint8Array(m.buffer,Q.end*2,Fe*2);V.set(Se,W),W+=Fe*2,Q.end+=Fe}return new DataView(V.buffer)}function Ne(s){var c=s.array.slice(s.offset.value,s.offset.value+s.size),h=tn(c);const m=s.lines*s.channels*s.width,p=s.type==1?new Uint16Array(m):new Uint32Array(m);let E=0,b=0;const F=new Array(4);for(let L=0;L<s.lines;L++)for(let S=0;S<s.channels;S++){let w=0;switch(s.type){case 1:F[0]=E,F[1]=F[0]+s.width,E=F[1]+s.width;for(let H=0;H<s.width;++H){const pe=h[F[0]++]<<8|h[F[1]++];w+=pe,p[b]=w,b++}break;case 2:F[0]=E,F[1]=F[0]+s.width,F[2]=F[1]+s.width,E=F[2]+s.width;for(let H=0;H<s.width;++H){const pe=h[F[0]++]<<24|h[F[1]++]<<16|h[F[2]++]<<8;w+=pe,p[b]=w,b++}break}}return new DataView(p.buffer)}function Dt(s){var c=s.viewer,h={value:s.offset.value},m=new Uint8Array(s.width*s.lines*(s.channels*s.type*2)),p={version:D(c,h),unknownUncompressedSize:D(c,h),unknownCompressedSize:D(c,h),acCompressedSize:D(c,h),dcCompressedSize:D(c,h),rleCompressedSize:D(c,h),rleUncompressedSize:D(c,h),rleRawSize:D(c,h),totalAcUncompressedCount:D(c,h),totalDcUncompressedCount:D(c,h),acCompression:D(c,h)};if(p.version<2)throw"EXRLoader.parse: "+xt.compression+" version "+p.version+" is unsupported";for(var E=new Array,b=He(c,h)-2;b>0;){var F=Tt(c.buffer,h),L=f(c,h),S=L>>2&3,w=(L>>4)-1,H=new Int8Array([w])[0],pe=f(c,h);E.push({name:F,index:H,type:pe,compression:S}),b-=F.length+3}for(var Q=xt.channels,j=new Array(s.channels),W=0;W<s.channels;++W){var V=j[W]={},le=Q[W];V.name=le.name,V.compression=0,V.decoded=!1,V.type=le.pixelType,V.pLinear=le.pLinear,V.width=s.width,V.height=s.lines}for(var ue={idx:new Array(3)},Fe=0;Fe<s.channels;++Fe)for(var V=j[Fe],W=0;W<E.length;++W){var Se=E[W];V.name==Se.name&&(V.compression=Se.compression,Se.index>=0&&(ue.idx[Se.index]=Fe),V.offset=Fe)}if(p.acCompressedSize>0)switch(p.acCompression){case 0:var fe=new Uint16Array(p.totalAcUncompressedCount);ie(s.array,c,h,p.acCompressedSize,fe,p.totalAcUncompressedCount);break;case 1:var Be=s.array.slice(h.value,h.value+p.totalAcUncompressedCount),ze=tn(Be),fe=new Uint16Array(ze.buffer);h.value+=p.totalAcUncompressedCount;break}if(p.dcCompressedSize>0){var De={array:s.array,offset:h,size:p.dcCompressedSize},$e=new Uint16Array(ht(De).buffer);h.value+=p.dcCompressedSize}if(p.rleRawSize>0){var Be=s.array.slice(h.value,h.value+p.rleCompressedSize),ze=tn(Be),Jt=qe(ze.buffer);h.value+=p.rleCompressedSize}for(var Ke=0,Ae=new Array(j.length),W=0;W<Ae.length;++W)Ae[W]=new Array;for(var Ge=0;Ge<s.lines;++Ge)for(var me=0;me<j.length;++me)Ae[me].push(Ke),Ke+=j[me].width*s.type*2;Mt(ue,Ae,j,fe,$e,m);for(var W=0;W<j.length;++W){var V=j[W];if(!V.decoded)switch(V.compression){case 2:for(var ae=0,ke=0,Ge=0;Ge<s.lines;++Ge){for(var Ct=Ae[W][ae],_e=0;_e<V.width;++_e){for(var rt=0;rt<2*V.type;++rt)m[Ct++]=Jt[ke+rt*V.width*V.height];ke++}ae++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(m.buffer)}function Tt(s,c){for(var h=new Uint8Array(s),m=0;h[c.value+m]!=0;)m+=1;var p=new TextDecoder().decode(h.slice(c.value,c.value+m));return c.value=c.value+m+1,p}function hn(s,c,h){var m=new TextDecoder().decode(new Uint8Array(s).slice(c.value,c.value+h));return c.value=c.value+h,m}function qt(s,c){var h=nt(s,c),m=be(s,c);return[h,m]}function dn(s,c){var h=be(s,c),m=be(s,c);return[h,m]}function nt(s,c){var h=s.getInt32(c.value,!0);return c.value=c.value+4,h}function be(s,c){var h=s.getUint32(c.value,!0);return c.value=c.value+4,h}function bt(s,c){var h=s[c.value];return c.value=c.value+1,h}function f(s,c){var h=s.getUint8(c.value);return c.value=c.value+1,h}const D=function(s,c){let h;return"getBigInt64"in DataView.prototype?h=Number(s.getBigInt64(c.value,!0)):h=s.getUint32(c.value+4,!0)+Number(s.getUint32(c.value,!0)<<32),c.value+=8,h};function K(s,c){var h=s.getFloat32(c.value,!0);return c.value+=4,h}function re(s,c){return Lt.toHalfFloat(K(s,c))}function G(s){var c=(s&31744)>>10,h=s&1023;return(s>>15?-1:1)*(c?c===31?h?NaN:1/0:Math.pow(2,c-15)*(1+h/1024):6103515625e-14*(h/1024))}function He(s,c){var h=s.getUint16(c.value,!0);return c.value+=2,h}function Ve(s,c){return G(He(s,c))}function Jn(s,c,h,m){for(var p=h.value,E=[];h.value<p+m-1;){var b=Tt(c,h),F=nt(s,h),L=f(s,h);h.value+=3;var S=nt(s,h),w=nt(s,h);E.push({name:b,pixelType:F,pLinear:L,xSampling:S,ySampling:w})}return h.value+=1,E}function $t(s,c){var h=K(s,c),m=K(s,c),p=K(s,c),E=K(s,c),b=K(s,c),F=K(s,c),L=K(s,c),S=K(s,c);return{redX:h,redY:m,greenX:p,greenY:E,blueX:b,blueY:F,whiteX:L,whiteY:S}}function je(s,c){var h=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],m=f(s,c);return h[m]}function Ye(s,c){var h=be(s,c),m=be(s,c),p=be(s,c),E=be(s,c);return{xMin:h,yMin:m,xMax:p,yMax:E}}function Gt(s,c){var h=["INCREASING_Y"],m=f(s,c);return h[m]}function dt(s,c){var h=K(s,c),m=K(s,c);return[h,m]}function ft(s,c){var h=K(s,c),m=K(s,c),p=K(s,c);return[h,m,p]}function yt(s,c,h,m,p){if(m==="string"||m==="stringvector"||m==="iccProfile")return hn(c,h,p);if(m==="chlist")return Jn(s,c,h,p);if(m==="chromaticities")return $t(s,h);if(m==="compression")return je(s,h);if(m==="box2i")return Ye(s,h);if(m==="lineOrder")return Gt(s,h);if(m==="float")return K(s,h);if(m==="v2f")return dt(s,h);if(m==="v3f")return ft(s,h);if(m==="int")return nt(s,h);if(m==="rational")return qt(s,h);if(m==="timecode")return dn(s,h);if(m==="preview")return h.value+=p,"skipped";h.value+=p}function Rr(s,c,h){const m={};if(s.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";m.version=s.getUint8(4);const p=s.getUint8(5);m.spec={singleTile:!!(p&2),longName:!!(p&4),deepFormat:!!(p&8),multiPart:!!(p&16)},h.value=8;for(var E=!0;E;){var b=Tt(c,h);if(b==0)E=!1;else{var F=Tt(c,h),L=be(s,h),S=yt(s,c,h,F,L);S===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${F}'.`):m[b]=S}}if(p!=0)throw console.error("EXRHeader:",m),"THREE.EXRLoader: provided file is currently unsupported.";return m}function Dr(s,c,h,m,p){const E={size:0,viewer:c,array:h,offset:m,width:s.dataWindow.xMax-s.dataWindow.xMin+1,height:s.dataWindow.yMax-s.dataWindow.yMin+1,channels:s.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:s.channels[0].pixelType,uncompress:null,getter:null,format:null,[Kt?"colorSpace":"encoding"]:null};switch(s.compression){case"NO_COMPRESSION":E.lines=1,E.uncompress=tt;break;case"RLE_COMPRESSION":E.lines=1,E.uncompress=Rt;break;case"ZIPS_COMPRESSION":E.lines=1,E.uncompress=ht;break;case"ZIP_COMPRESSION":E.lines=16,E.uncompress=ht;break;case"PIZ_COMPRESSION":E.lines=32,E.uncompress=_t;break;case"PXR24_COMPRESSION":E.lines=16,E.uncompress=Ne;break;case"DWAA_COMPRESSION":E.lines=32,E.uncompress=Dt;break;case"DWAB_COMPRESSION":E.lines=256,E.uncompress=Dt;break;default:throw"EXRLoader.parse: "+s.compression+" is unsupported"}if(E.scanlineBlockSize=E.lines,E.type==1)switch(p){case wt:E.getter=Ve,E.inputSize=2;break;case et:E.getter=He,E.inputSize=2;break}else if(E.type==2)switch(p){case wt:E.getter=K,E.inputSize=4;break;case et:E.getter=re,E.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+E.type+" for "+s.compression+".";E.blockCount=(s.dataWindow.yMax+1)/E.scanlineBlockSize;for(var b=0;b<E.blockCount;b++)D(c,m);E.outputChannels=E.channels==3?4:E.channels;const F=E.width*E.height*E.outputChannels;switch(p){case wt:E.byteArray=new Float32Array(F),E.channels<E.outputChannels&&E.byteArray.fill(1,0,F);break;case et:E.byteArray=new Uint16Array(F),E.channels<E.outputChannels&&E.byteArray.fill(15360,0,F);break;default:console.error("THREE.EXRLoader: unsupported type: ",p);break}return E.bytesPerLine=E.width*E.inputSize*E.channels,E.outputChannels==4?E.format=Bs:E.format=hs,Kt?E.colorSpace="srgb-linear":E.encoding=3e3,E}const en=new DataView(t),Tr=new Uint8Array(t),Pt={value:0},xt=Rr(en,t,Pt),q=Dr(xt,en,Tr,Pt,this.type),Nn={value:0},br={R:0,G:1,B:2,A:3,Y:0};for(let s=0;s<q.height/q.scanlineBlockSize;s++){const c=be(en,Pt);q.size=be(en,Pt),q.lines=c+q.scanlineBlockSize>q.height?q.height-c:q.scanlineBlockSize;const m=q.size<q.lines*q.bytesPerLine?q.uncompress(q):tt(q);Pt.value+=q.size;for(let p=0;p<q.scanlineBlockSize;p++){const E=p+s*q.scanlineBlockSize;if(E>=q.height)break;for(let b=0;b<q.channels;b++){const F=br[xt.channels[b].name];for(let L=0;L<q.width;L++){Nn.value=(p*(q.channels*q.width)+b*q.width+L)*q.inputSize;const S=(q.height-1-E)*(q.width*q.outputChannels)+L*q.outputChannels+F;q.byteArray[S]=q.getter(m,Nn)}}}}return{header:xt,width:q.width,height:q.height,data:q.byteArray,format:q.format,[Kt?"colorSpace":"encoding"]:q[Kt?"colorSpace":"encoding"],type:this.type}}setDataType(t){return this.type=t,this}load(t,n,e,r){function o(i,l){Kt?i.colorSpace=l.colorSpace:i.encoding=l.encoding,i.minFilter=Ut,i.magFilter=Ut,i.generateMipmaps=!1,i.flipY=!1,n&&n(i,l)}return super.load(t,o,e,r)}}const Mn=new WeakMap;class Po extends sr{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,n,e,r){const o=new an(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,i=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(i,l).then(n).catch(r)},e,r)}decodeDracoFile(t,n,e,r){const o={attributeIDs:e||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!e};this.decodeGeometry(t,o).then(n)}decodeGeometry(t,n){for(const a in n.attributeTypes){const u=n.attributeTypes[a];u.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[a]=u.name)}const e=JSON.stringify(n);if(Mn.has(t)){const a=Mn.get(t);if(a.key===e)return a.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const o=this.workerNextTaskID++,i=t.byteLength,l=this._getWorker(o,i).then(a=>(r=a,new Promise((u,B)=>{r._callbacks[o]={resolve:u,reject:B},r.postMessage({type:"decode",id:o,taskConfig:n,buffer:t},[t])}))).then(a=>this._createGeometry(a.geometry));return l.catch(()=>!0).then(()=>{r&&o&&this._releaseTask(r,o)}),Mn.set(t,{key:e,promise:l}),l}_createGeometry(t){const n=new cr;t.index&&n.setIndex(new jt(t.index.array,1));for(let e=0;e<t.attributes.length;e++){const r=t.attributes[e],o=r.name,i=r.array,l=r.itemSize;n.setAttribute(o,new jt(i,l))}return n}_loadLibrary(t,n){const e=new an(this.manager);return e.setPath(this.decoderPath),e.setResponseType(n),e.setWithCredentials(this.withCredentials),new Promise((r,o)=>{e.load(t,r,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(e=>{const r=e[0];t||(this.decoderConfig.wasmBinary=e[1]);const o=xo.toString(),i=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(t,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(o){const i=o.data;switch(i.type){case"decode":r._callbacks[i.id].resolve(i);break;case"error":r._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,o){return r._taskLoad>o._taskLoad?-1:1});const e=this.workerPool[this.workerPool.length-1];return e._taskCosts[t]=n,e._taskLoad+=n,e})}_releaseTask(t,n){t._taskLoad-=t._taskCosts[n],delete t._callbacks[n],delete t._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function xo(){let A,t;onmessage=function(i){const l=i.data;switch(l.type){case"init":A=l.decoderConfig,t=new Promise(function(B){A.onModuleLoaded=function(d){B({draco:d})},DracoDecoderModule(A)});break;case"decode":const a=l.buffer,u=l.taskConfig;t.then(B=>{const d=B.draco,C=new d.Decoder,g=new d.DecoderBuffer;g.Init(new Int8Array(a),a.byteLength);try{const M=n(d,C,g,u),y=M.attributes.map(I=>I.array.buffer);M.index&&y.push(M.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:M},y)}catch(M){console.error(M),self.postMessage({type:"error",id:l.id,error:M.message})}finally{d.destroy(g),d.destroy(C)}});break}};function n(i,l,a,u){const B=u.attributeIDs,d=u.attributeTypes;let C,g;const M=l.GetEncodedGeometryType(a);if(M===i.TRIANGULAR_MESH)C=new i.Mesh,g=l.DecodeBufferToMesh(a,C);else if(M===i.POINT_CLOUD)C=new i.PointCloud,g=l.DecodeBufferToPointCloud(a,C);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!g.ok()||C.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+g.error_msg());const y={index:null,attributes:[]};for(const I in B){const T=self[d[I]];let k,v;if(u.useUniqueIDs)v=B[I],k=l.GetAttributeByUniqueId(C,v);else{if(v=l.GetAttributeId(C,i[B[I]]),v===-1)continue;k=l.GetAttribute(C,v)}y.attributes.push(r(i,l,C,I,T,k))}return M===i.TRIANGULAR_MESH&&(y.index=e(i,l,C)),i.destroy(C),y}function e(i,l,a){const B=a.num_faces()*3,d=B*4,C=i._malloc(d);l.GetTrianglesUInt32Array(a,d,C);const g=new Uint32Array(i.HEAPF32.buffer,C,B).slice();return i._free(C),{array:g,itemSize:1}}function r(i,l,a,u,B,d){const C=d.num_components(),M=a.num_points()*C,y=M*B.BYTES_PER_ELEMENT,I=o(i,B),T=i._malloc(y);l.GetAttributeDataArrayForAllPoints(a,d,I,y,T);const k=new B(i.HEAPF32.buffer,T,M).slice();return i._free(T),{name:u,array:k,itemSize:C}}function o(i,l){switch(l){case Float32Array:return i.DT_FLOAT32;case Int8Array:return i.DT_INT8;case Int16Array:return i.DT_INT16;case Int32Array:return i.DT_INT32;case Uint8Array:return i.DT_UINT8;case Uint16Array:return i.DT_UINT16;case Uint32Array:return i.DT_UINT32}}}let rn;const In=()=>{if(rn)return rn;const A="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",t="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",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),e=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=A;WebAssembly.validate(n)&&(r=t);let o;const i=WebAssembly.instantiate(l(r),{}).then(d=>{o=d.instance,o.exports.__wasm_call_ctors()});function l(d){const C=new Uint8Array(d.length);for(let M=0;M<d.length;++M){const y=d.charCodeAt(M);C[M]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let g=0;for(let M=0;M<d.length;++M)C[g++]=C[M]<60?e[C[M]]:(C[M]-60)*64+C[++M];return C.buffer.slice(0,g)}function a(d,C,g,M,y,I){const T=o.exports.sbrk,k=g+3&-4,v=T(k*M),U=T(y.length),J=new Uint8Array(o.exports.memory.buffer);J.set(y,U);const R=d(v,g,M,U,y.length);if(R===0&&I&&I(v,k,M),C.set(J.subarray(v,v+g*M)),T(v-T(0)),R!==0)throw new Error(`Malformed buffer data: ${R}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},B={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return rn={ready:i,supported:!0,decodeVertexBuffer(d,C,g,M,y){a(o.exports.meshopt_decodeVertexBuffer,d,C,g,M,o.exports[u[y]])},decodeIndexBuffer(d,C,g,M){a(o.exports.meshopt_decodeIndexBuffer,d,C,g,M)},decodeIndexSequence(d,C,g,M){a(o.exports.meshopt_decodeIndexSequence,d,C,g,M)},decodeGltfBuffer(d,C,g,M,y,I){a(o.exports[B[y]],d,C,g,M,o.exports[u[I]])}},rn};let sn=null,vr="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Mr(A,t,n){return e=>{n&&n(e),A&&(sn||(sn=new Po),sn.setDecoderPath(typeof A=="string"?A:vr),e.setDRACOLoader(sn)),t&&e.setMeshoptDecoder(typeof In=="function"?In():In)}}function Bn(A,t=!0,n=!0,e){return An(_n,A,Mr(t,n,e))}Bn.preload=(A,t=!0,n=!0,e)=>An.preload(_n,A,Mr(t,n,e));Bn.clear=A=>An.clear(_n,A);Bn.setDecoderPath=A=>{vr=A};const Jo=x.forwardRef(({makeDefault:A,camera:t,regress:n,domElement:e,enableDamping:r=!0,keyEvents:o=!1,onChange:i,onStart:l,onEnd:a,...u},B)=>{const d=Le(R=>R.invalidate),C=Le(R=>R.camera),g=Le(R=>R.gl),M=Le(R=>R.events),y=Le(R=>R.setEvents),I=Le(R=>R.set),T=Le(R=>R.get),k=Le(R=>R.performance),v=t||C,U=e||M.connected||g.domElement,J=x.useMemo(()=>new eo(v),[v]);return Wt(()=>{J.enabled&&J.update()},-1),x.useEffect(()=>(o&&J.connect(o===!0?U:o),J.connect(U),()=>void J.dispose()),[o,U,n,J,d]),x.useEffect(()=>{const R=O=>{d(),n&&k.regress(),i&&i(O)},X=O=>{l&&l(O)},_=O=>{a&&a(O)};return J.addEventListener("change",R),J.addEventListener("start",X),J.addEventListener("end",_),()=>{J.removeEventListener("start",X),J.removeEventListener("end",_),J.removeEventListener("change",R)}},[i,l,a,J,d,y]),x.useEffect(()=>{if(A){const R=T().controls;return I({controls:J}),()=>I({controls:R})}},[A,J]),x.createElement("primitive",un({ref:B,object:J,enableDamping:r},u))}),Fn={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},No="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",qn=A=>Array.isArray(A);function Ir({files:A=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:n=void 0,encoding:e=void 0,extensions:r}={}){var o;let i=null,l=!1,a;if(n){if(!(n in Fn))throw new Error("Preset must be one of: "+Object.keys(Fn).join(", "));A=Fn[n],t=No}if(l=qn(A),a=qn(A)?"cube":A.startsWith("data:application/exr")?"exr":A.startsWith("data:application/hdr")?"hdr":(o=A.split(".").pop())==null||(o=o.split("?"))==null||(o=o.shift())==null?void 0:o.toLowerCase(),i=l?Cs:a==="hdr"?Uo:a==="exr"?_o:null,!i)throw new Error("useEnvironment: Unrecognized file extension: "+A);const u=An(i,l?[A]:A,g=>{g.setPath==null||g.setPath(t),r&&r(g)}),B=l?u[0]:u;B.mapping=l?ds:fs;const d=3001,C=3e3;return"colorSpace"in B?B.colorSpace=e??l?"srgb":"srgb-linear":B.encoding=e??l?d:C,B}const Ko=A=>A.current&&A.current.isScene,ko=A=>Ko(A)?A.current:A;function Pn(A,t,n,e,r=0){const o=ko(t||n),i=o.background,l=o.environment,a=o.backgroundBlurriness||0;return A!=="only"&&(o.environment=e),A&&(o.background=e),A&&o.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=r),()=>{A!=="only"&&(o.environment=l),A&&(o.background=i),A&&o.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=a)}}function xn({scene:A,background:t=!1,blur:n,map:e}){const r=Le(o=>o.scene);return x.useLayoutEffect(()=>{if(e)return Pn(t,A,r,e,n)},[r,A,e,t,n]),null}function Fr({background:A=!1,scene:t,blur:n,...e}){const r=Ir(e),o=Le(i=>i.scene);return x.useLayoutEffect(()=>Pn(A,t,o,r,n),[r,A,t,o,n]),null}function Qo({children:A,near:t=1,far:n=1e3,resolution:e=256,frames:r=1,map:o,background:i=!1,blur:l,scene:a,files:u,path:B,preset:d=void 0,extensions:C}){const g=Le(v=>v.gl),M=Le(v=>v.scene),y=x.useRef(null),[I]=x.useState(()=>new ms),T=x.useMemo(()=>{const v=new ps(e);return v.texture.type=et,v},[e]);x.useLayoutEffect(()=>(r===1&&y.current.update(g,I),Pn(i,a,M,T.texture,l)),[A,I,T.texture,a,M,i,r,g]);let k=1;return Wt(()=>{(r===1/0||k<r)&&(y.current.update(g,I),k++)}),x.createElement(x.Fragment,null,Es(x.createElement(x.Fragment,null,A,x.createElement("cubeCamera",{ref:y,args:[t,n,T]}),u||d?x.createElement(Fr,{background:!0,files:u,preset:d,path:B,extensions:C}):o?x.createElement(xn,{background:!0,map:o,extensions:C}):null),I))}function Xo(A){var t,n,e,r;const o=Ir(A),i=A.map||o;x.useMemo(()=>gs({GroundProjectedEnvImpl:Vs}),[]);const l=x.useMemo(()=>[i],[i]),a=(t=A.ground)==null?void 0:t.height,u=(n=A.ground)==null?void 0:n.radius,B=(e=(r=A.ground)==null?void 0:r.scale)!==null&&e!==void 0?e:1e3;return x.createElement(x.Fragment,null,x.createElement(xn,un({},A,{map:i})),x.createElement("groundProjectedEnvImpl",{args:l,scale:B,height:a,radius:u}))}function jo(A){return A.ground?x.createElement(Xo,A):A.map?x.createElement(xn,A):A.children?x.createElement(Qo,A):x.createElement(Fr,A)}const Yo=x.forwardRef(({scale:A=10,frames:t=1/0,opacity:n=1,width:e=1,height:r=1,blur:o=1,near:i=0,far:l=10,resolution:a=512,smooth:u=!0,color:B="#000000",depthWrite:d=!1,renderOrder:C,...g},M)=>{const y=x.useRef(null),I=Le(z=>z.scene),T=Le(z=>z.gl),k=x.useRef(null);e=e*(Array.isArray(A)?A[0]:A||1),r=r*(Array.isArray(A)?A[1]:A||1);const[v,U,J,R,X,_,O]=x.useMemo(()=>{const z=new Qn(a,a),Z=new Qn(a,a);Z.texture.generateMipmaps=z.texture.generateMipmaps=!1;const he=new vs(e,r).rotateX(Math.PI/2),ee=new On(he),oe=new Ms;oe.depthTest=oe.depthWrite=!1,oe.onBeforeCompile=ve=>{ve.uniforms={...ve.uniforms,ucolor:{value:new ct(B)}},ve.fragmentShader=ve.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),ve.fragmentShader=ve.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const ge=new Dn(wo),ce=new Dn(Oo);return ce.depthTest=ge.depthTest=!1,[z,he,oe,ee,ge,ce,Z]},[a,e,r,A,B]),N=z=>{R.visible=!0,R.material=X,X.uniforms.tDiffuse.value=v.texture,X.uniforms.h.value=z*1/256,T.setRenderTarget(O),T.render(R,k.current),R.material=_,_.uniforms.tDiffuse.value=O.texture,_.uniforms.v.value=z*1/256,T.setRenderTarget(v),T.render(R,k.current),R.visible=!1};let P=0,te,ne;return Wt(()=>{k.current&&(t===1/0||P<t)&&(P++,te=I.background,ne=I.overrideMaterial,y.current.visible=!1,I.background=null,I.overrideMaterial=J,T.setRenderTarget(v),T.render(I,k.current),N(o),u&&N(o*.4),T.setRenderTarget(null),y.current.visible=!0,I.overrideMaterial=ne,I.background=te)}),x.useImperativeHandle(M,()=>y.current,[]),x.createElement("group",un({"rotation-x":Math.PI/2},g,{ref:y}),x.createElement("mesh",{renderOrder:C,geometry:U,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},x.createElement("meshBasicMaterial",{transparent:!0,map:v.texture,opacity:n,depthWrite:d})),x.createElement("orthographicCamera",{ref:k,args:[-e/2,e/2,r/2,-r/2,i,l]}))}),Zo=({meshPath:A="/meshes/macbook/mac-draco.glb",children:t})=>{const n=x.useRef(null),e=Bn(A,!0);console.log("GLTF",e);let{nodes:r,materials:o}=e;return Wt(i=>{const l=i.clock.getElapsedTime(),a=n.current;a&&(a.rotation.x=Qt.lerp(a.rotation.x,Math.cos(l/2)/20+.25,.1),a.rotation.y=Qt.lerp(a.rotation.y,Math.sin(l/4)/20,.1),a.rotation.z=Qt.lerp(a.rotation.z,Math.sin(l/8)/20,.1),a.position.y=Qt.lerp(a.position.y,(-2+Math.sin(l/2))/2,.1))}),Yt("group",{ref:n,dispose:null,children:[Me("group",{"rotation-x":-.425,position:[0,-.04,.41],children:Yt("group",{position:[0,2.96,-.13],rotation:[Math.PI/2,0,0],children:[Me("mesh",{material:o.aluminium,geometry:r.Cube008.geometry}),Me("mesh",{material:o["matte.001"],geometry:r.Cube008_1.geometry}),Me("mesh",{geometry:r.Cube008_2.geometry,children:Me(ws,{className:"content","rotation-x":-Math.PI/2,position:[0,.05,-.09],transform:!0,occlude:!0,children:Me("div",{className:"wrapper",onPointerDown:i=>i.stopPropagation(),children:t})})})]})}),Me("mesh",{material:o.keys,geometry:r.keyboard.geometry,position:[1.79,0,3.45]}),Yt("group",{position:[0,-.1,3.39],children:[Me("mesh",{material:o.aluminium,geometry:r.Cube002.geometry}),Me("mesh",{material:o.trackpad,geometry:r.Cube002_1.geometry})]}),Me("mesh",{material:o.touchbar,geometry:r.touchbar.geometry,position:[0,-.03,1.2]})]})},Wo=ur.div`
  width: 100%;
  height: 100%;

  .content {
    margin-top: 27px;
    width: 334px;
    height: 216px;
    border-radius: 3px;
    overflow-y: auto;
    padding: 0;
  }

  .wrapper {
    padding: 10px;
    width: 668px;
    height: 432px;
    transform: scale(0.5);
    transform-origin: top left;
  }
`,ln=({meshPath:A="/meshes/macbook/mac-draco.glb",children:t})=>Me(Wo,{children:Yt(Is,{camera:{position:[-5,0,-15],fov:55},children:[Me("pointLight",{position:[10,10,10],intensity:1.5}),Yt(x.Suspense,{fallback:null,children:[Me("group",{rotation:[0,Math.PI,0],position:[0,1,0],children:Me(Zo,{meshPath:A,children:t})}),Me(jo,{preset:"city"})]}),Me(Yo,{position:[0,-4.5,0],scale:20,blur:2,far:4.5}),Me(Jo,{enablePan:!1,enableZoom:!1,minPolarAngle:Math.PI/2.2,maxPolarAngle:Math.PI/2.2})]})});try{ln.displayName="Macbook",ln.__docgenInfo={description:"",displayName:"Macbook",props:{meshPath:{defaultValue:{value:"/meshes/macbook/mac-draco.glb"},description:"",name:"meshPath",required:!1,type:{name:"string"}}}}}catch{}const ri={component:ln,title:"gle-r3f-components/Macbook",argTypes:{}},Vo=ur.div`
  width: 100vw;
  height: 100vh;
`,Xt=A=>Me(Vo,{children:Me(ln,{meshPath:A.meshPath,children:Me("h2",{children:"Hello World!"})})});Xt.args={meshPath:"./meshes/macbook/mac-draco.glb"};var $n,er,tr;Xt.parameters={...Xt.parameters,docs:{...($n=Xt.parameters)==null?void 0:$n.docs,source:{originalSource:`(args: MacbookProps) => {
  return <MacbookContainer>
            <Macbook meshPath={args.meshPath}>
                <h2>Hello World!</h2>
            </Macbook>
        </MacbookContainer>;
}`,...(tr=(er=Xt.parameters)==null?void 0:er.docs)==null?void 0:tr.source}}};const si=["Default"];export{Xt as Default,si as __namedExportsOrder,ri as default};
//# sourceMappingURL=Macbook.stories-9208bd2d.js.map
