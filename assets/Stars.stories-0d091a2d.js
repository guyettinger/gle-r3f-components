import{P as B,u as v,D as d,M as D,V as N,j as i,s as M,C as W}from"./react-three-fiber.esm-4fee7c38.js";import{r as e}from"./index-76fb7be0.js";import{v as R,m as U,i as I}from"./index-0332b2ed.esm-4227e939.js";import{_ as g}from"./extends-98964cd2.js";import"./_commonjsHelpers-de833af9.js";const x=R>=154?"opaque_fragment":"output_fragment";class $ extends B{constructor(r){super(r),this.onBeforeCompile=(a,s)=>{const{isWebGL2:o}=s.capabilities;a.fragmentShader=a.fragmentShader.replace(`#include <${x}>`,`
        ${o?`#include <${x}>`:`#extension GL_OES_standard_derivatives : enable
#include <${x}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${R>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const G=e.forwardRef((t,r)=>{const[a]=e.useState(()=>new $(null));return e.createElement("primitive",g({},t,{object:a,ref:r,attach:"material"}))});let u,m;const j=e.createContext(null),w=new D,A=new N,T=e.forwardRef(({children:t,range:r,limit:a=1e3,...s},o)=>{const n=e.useRef(null),[l,p]=e.useState([]),[[c,y,b]]=e.useState(()=>[new Float32Array(a*3),Float32Array.from({length:a*3},()=>1),Float32Array.from({length:a},()=>1)]);e.useEffect(()=>{n.current.geometry.attributes.position.needsUpdate=!0}),v(()=>{for(n.current.updateMatrix(),n.current.updateMatrixWorld(),w.copy(n.current.matrixWorld).invert(),n.current.geometry.drawRange.count=Math.min(a,r!==void 0?r:a,l.length),u=0;u<l.length;u++)m=l[u].current,m.getWorldPosition(A).applyMatrix4(w),A.toArray(c,u*3),n.current.geometry.attributes.position.needsUpdate=!0,m.matrixWorldNeedsUpdate=!0,m.color.toArray(y,u*3),n.current.geometry.attributes.color.needsUpdate=!0,b.set([m.size],u),n.current.geometry.attributes.size.needsUpdate=!0});const F=e.useMemo(()=>({getParent:()=>n,subscribe:E=>(p(_=>[..._,E]),()=>p(_=>_.filter(k=>k.current!==E.current)))}),[]);return e.createElement("points",g({userData:{instances:l},matrixAutoUpdate:!1,ref:U([o,n]),raycast:()=>null},s),e.createElement("bufferGeometry",null,e.createElement("bufferAttribute",{attach:"attributes-position",count:c.length/3,array:c,itemSize:3,usage:d}),e.createElement("bufferAttribute",{attach:"attributes-color",count:y.length/3,array:y,itemSize:3,usage:d}),e.createElement("bufferAttribute",{attach:"attributes-size",count:b.length,array:b,itemSize:1,usage:d})),e.createElement(j.Provider,{value:F},t))}),q=e.forwardRef(({children:t,positions:r,colors:a,sizes:s,stride:o=3,...n},l)=>{const p=e.useRef(null);return v(()=>{const c=p.current.geometry.attributes;c.position.needsUpdate=!0,a&&(c.color.needsUpdate=!0),s&&(c.size.needsUpdate=!0)}),e.createElement("points",g({ref:U([l,p])},n),e.createElement("bufferGeometry",null,e.createElement("bufferAttribute",{attach:"attributes-position",count:r.length/o,array:r,itemSize:o,usage:d}),a&&e.createElement("bufferAttribute",{attach:"attributes-color",count:a.length/o,array:a,itemSize:3,usage:d}),s&&e.createElement("bufferAttribute",{attach:"attributes-size",count:s.length/o,array:s,itemSize:1,usage:d})),t)}),L=e.forwardRef((t,r)=>t.positions instanceof Float32Array?e.createElement(q,g({},t,{ref:r})):e.createElement(T,g({},t,{ref:r}))),h=t=>{const r=e.useRef(null),[a]=e.useState(()=>I(new Float32Array(5e3),{radius:1.5}));return v((s,o)=>{const n=r==null?void 0:r.current;n&&(n.rotation.x-=o/10,n.rotation.y-=o/15)}),i("group",{rotation:[0,0,Math.PI/4],children:i(L,{ref:r,positions:a,stride:3,frustumCulled:!1,...t,children:i(G,{transparent:!0,color:"#013062",size:.005,sizeAttenuation:!0,depthWrite:!1})})})};try{h.displayName="Stars",h.__docgenInfo={description:"",displayName:"Stars",props:{}}}catch{}const O=M(W)`
  position: fixed !important;
  z-index: -1;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(0deg, #000000, #013062);
`,S=({children:t})=>i(O,{className:"gle-background-canvas",camera:{position:[0,0,1]},children:t});try{S.displayName="CanvasBackground",S.__docgenInfo={description:"",displayName:"CanvasBackground",props:{}}}catch{}const Z={component:h,title:"gle-r3f-components/Stars",argTypes:{}},V=M.div`
  width: 100vw;
  height: 100vh;
`,H=t=>i(V,{children:i(S,{children:i(h,{})})}),f=t=>i(H,{...t});f.args={};var C,P,z;f.parameters={...f.parameters,docs:{...(C=f.parameters)==null?void 0:C.docs,source:{originalSource:"(args: StarsProps) => <StoryTemplate {...args} />",...(z=(P=f.parameters)==null?void 0:P.docs)==null?void 0:z.source}}};const ee=["Default"];export{f as Default,ee as __namedExportsOrder,Z as default};
//# sourceMappingURL=Stars.stories-0d091a2d.js.map
